{"version":3,"file":"d2s.bundle.js","mappings":"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","sources":["webpack://@Ricola3D/d2s/./src/binary/bitreader.ts","webpack://@Ricola3D/d2s/./src/binary/bitwriter.ts","webpack://@Ricola3D/d2s/./src/d2/attribute_enhancer.ts","webpack://@Ricola3D/d2s/./src/d2/attributes.ts","webpack://@Ricola3D/d2s/./src/d2/constants.ts","webpack://@Ricola3D/d2s/./src/d2/d2s.ts","webpack://@Ricola3D/d2s/./src/d2/header.ts","webpack://@Ricola3D/d2s/./src/d2/index.ts","webpack://@Ricola3D/d2s/./src/d2/items.ts","webpack://@Ricola3D/d2s/./src/d2/skills.ts","webpack://@Ricola3D/d2s/./src/d2/types.ts","webpack://@Ricola3D/d2s/./src/d2/utils.ts","webpack://@Ricola3D/d2s/./src/d2/versions/default_header.ts","webpack://@Ricola3D/d2s/webpack/bootstrap","webpack://@Ricola3D/d2s/webpack/before-startup","webpack://@Ricola3D/d2s/webpack/startup","webpack://@Ricola3D/d2s/webpack/after-startup"],"sourcesContent":["export class BitReader {\r\n  public littleEndian = true;\r\n  public bits: Uint8Array;\r\n  public offset = 0;\r\n\r\n  constructor(arrBuffer: ArrayBuffer) {\r\n    const typedArray = new Uint8Array(arrBuffer);\r\n    this.bits = new Uint8Array(typedArray.length * 8);\r\n    typedArray.reduce((acc: number, c: number) => {\r\n      const b = c\r\n        .toString(2)\r\n        .padStart(8, \"0\")\r\n        .split(\"\")\r\n        .reverse()\r\n        .map((e) => parseInt(e, 2));\r\n      b.forEach((bit) => (this.bits[acc++] = bit));\r\n      return acc;\r\n    }, 0);\r\n  }\r\n\r\n  public ReadBit(): number {\r\n    return this.bits[this.offset++];\r\n  }\r\n\r\n  public ReadBitArray(count: number): Uint8Array {\r\n    const bits = new Uint8Array(count);\r\n    for (let i = 0; i < count; i++) {\r\n      bits[i] = this.bits[this.offset++];\r\n    }\r\n    return bits;\r\n  }\r\n\r\n  public ReadBits(bytes: Uint8Array, count: number): Uint8Array {\r\n    let byteIndex = 0;\r\n    let bitIndex = 0;\r\n    for (let i = 0; i < count; i++) {\r\n      if (this.bits[this.offset + i]) {\r\n        bytes[byteIndex] |= (1 << bitIndex) & 0xff;\r\n      }\r\n      bitIndex++;\r\n      if (bitIndex == 8) {\r\n        byteIndex++;\r\n        bitIndex = 0;\r\n      }\r\n    }\r\n    this.offset += count;\r\n    return bytes;\r\n  }\r\n\r\n  public ReadBytes(bytes: number): Uint8Array {\r\n    return this.ReadBits(new Uint8Array(bytes), bytes * 8);\r\n  }\r\n\r\n  public ReadArray(bytes: number): Uint8Array {\r\n    return this.ReadBytes(bytes);\r\n  }\r\n\r\n  public ReadByte(bits = 8): number {\r\n    const dataview = new DataView(this.ReadBits(new Uint8Array(1), bits).buffer);\r\n    return dataview.getUint8(0);\r\n  }\r\n\r\n  public ReadUInt8(bits = 8): number {\r\n    return this.ReadByte(bits);\r\n  }\r\n\r\n  public ReadUInt16(bits: number = 8 * 2): number {\r\n    const dataview = new DataView(this.ReadBits(new Uint8Array(2), bits).buffer);\r\n    return dataview.getUint16(0, this.littleEndian);\r\n  }\r\n\r\n  public ReadUInt32(bits: number = 8 * 4): number {\r\n    const dataview = new DataView(this.ReadBits(new Uint8Array(4), bits).buffer);\r\n    return dataview.getUint32(0, this.littleEndian);\r\n  }\r\n\r\n  public ReadString(bytes: number): string {\r\n    const buffer = this.ReadBytes(bytes).buffer;\r\n    return new TextDecoder().decode(buffer);\r\n  }\r\n\r\n  public ReadNullTerminatedString(): string {\r\n    const start = this.offset;\r\n    while (this.ReadByte()) {}\r\n    const end = this.offset - 8;\r\n    const buffer = this.SeekBit(start).ReadBytes((end - start) / 8);\r\n    this.SeekBit(end + 8);\r\n    return new TextDecoder().decode(buffer);\r\n  }\r\n\r\n  public SkipBits(number: number): BitReader {\r\n    this.offset += number;\r\n    return this;\r\n  }\r\n\r\n  public SkipBytes(number: number): BitReader {\r\n    return this.SkipBits(number * 8);\r\n  }\r\n\r\n  public SeekBit(offset: number): BitReader {\r\n    this.offset = offset;\r\n    return this;\r\n  }\r\n\r\n  public SeekByte(offset: number): BitReader {\r\n    return this.SeekBit(offset * 8);\r\n  }\r\n\r\n  public Align(): BitReader {\r\n    this.offset = (this.offset + 7) & ~7;\r\n    return this;\r\n  }\r\n}\r\n","export class BitWriter {\r\n  public littleEndian = true;\r\n  public bits: Uint8Array;\r\n  public offset = 0;\r\n  public length = 0;\r\n\r\n  constructor(capacity = 8192) {\r\n    this.bits = new Uint8Array(capacity);\r\n  }\r\n\r\n  public WriteBit(value: number): BitWriter {\r\n    if (this.offset >= this.bits.length) {\r\n      const resized = new Uint8Array(this.bits.length + 8192);\r\n      resized.set(this.bits, 0);\r\n      this.bits = resized;\r\n    }\r\n    this.bits[this.offset++] = value;\r\n    if (this.offset > this.length) this.length++;\r\n    return this;\r\n  }\r\n\r\n  public WriteBits(bits: Uint8Array, numberOfBits: number): BitWriter {\r\n    for (let i = 0; i < numberOfBits; i++) {\r\n      this.WriteBit(bits[i]);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  public WriteBytes(bytes: Uint8Array, numberOfBits: number = bytes.length * 8): BitWriter {\r\n    const toWrite = new Uint8Array(numberOfBits);\r\n    bytes.reduce((acc, c) => {\r\n      const b = c\r\n        .toString(2)\r\n        .padStart(8, \"0\")\r\n        .split(\"\")\r\n        .reverse()\r\n        .map((e) => parseInt(e, 2));\r\n      b.forEach((bit) => (toWrite[acc++] = bit));\r\n      return acc;\r\n    }, 0);\r\n    return this.WriteBits(toWrite, numberOfBits);\r\n  }\r\n\r\n  public WriteArray(bytes: Uint8Array, numberOfBits: number = bytes.length * 8): BitWriter {\r\n    return this.WriteBytes(bytes, numberOfBits);\r\n  }\r\n\r\n  public WriteByte(value: number, numberOfBits = 8): BitWriter {\r\n    const buffer = new Uint8Array(1);\r\n    new DataView(buffer.buffer).setUint8(0, value);\r\n    return this.WriteBytes(buffer, numberOfBits);\r\n  }\r\n\r\n  public WriteUInt8(value: number, numberOfBits = 8): BitWriter {\r\n    return this.WriteByte(value, numberOfBits);\r\n  }\r\n\r\n  public WriteUInt16(value: number, numberOfBits: number = 8 * 2): BitWriter {\r\n    const buffer = new Uint8Array(2);\r\n    new DataView(buffer.buffer).setUint16(0, value, this.littleEndian);\r\n    return this.WriteBytes(buffer, numberOfBits);\r\n  }\r\n\r\n  public WriteUInt32(value: number, numberOfBits: number = 8 * 4): BitWriter {\r\n    const buffer = new Uint8Array(4);\r\n    new DataView(buffer.buffer).setUint32(0, value, this.littleEndian);\r\n    return this.WriteBytes(buffer, numberOfBits);\r\n  }\r\n\r\n  public WriteString(value: string, numberOfBytes: number): BitWriter {\r\n    const buffer = new TextEncoder().encode(value);\r\n    return this.WriteBytes(buffer, numberOfBytes * 8);\r\n  }\r\n\r\n  public SeekBit(offset: number): BitWriter {\r\n    this.offset = offset;\r\n    if (this.offset > this.length) {\r\n      this.length = this.offset;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  public SeekByte(offset: number): BitWriter {\r\n    return this.SeekBit(offset * 8);\r\n  }\r\n\r\n  public PeekBytes(count: number): Uint8Array {\r\n    const buffer = new Uint8Array(count);\r\n    let byteIndex = 0;\r\n    let bitIndex = 0;\r\n    for (let i = 0; i < count * 8; ++i) {\r\n      if (this.bits[this.offset + i]) {\r\n        buffer[byteIndex] |= (1 << bitIndex) & 0xff;\r\n      }\r\n      ++bitIndex;\r\n      if (bitIndex >= 8) {\r\n        ++byteIndex;\r\n        bitIndex = 0;\r\n      }\r\n    }\r\n    return buffer;\r\n  }\r\n\r\n  public Align(): BitWriter {\r\n    this.offset = (this.offset + 7) & ~7;\r\n    if (this.offset > this.length) {\r\n      this.length = this.offset;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  public ToArray(): Uint8Array {\r\n    const buffer = new Uint8Array((this.length - 1) / 8 + 1);\r\n    let byteIndex = 0;\r\n    let bitIndex = 0;\r\n    for (let i = 0; i < this.length; ++i) {\r\n      if (this.bits[i]) {\r\n        buffer[byteIndex] |= (1 << bitIndex) & 0xff;\r\n      }\r\n      ++bitIndex;\r\n      if (bitIndex >= 8) {\r\n        ++byteIndex;\r\n        bitIndex = 0;\r\n      }\r\n    }\r\n    return buffer;\r\n  }\r\n}\r\n","import { getConstantData } from \"./constants\";\r\nimport * as types from \"./types\";\r\nimport { nameRegex } from \"./utils\";\r\n\r\nenum ItemType {\r\n  Armor = 0x01,\r\n  Shield = 0x02, //treated the same as armor... only here to be able to parse nokkas jsons\r\n  Weapon = 0x03,\r\n  Other = 0x04,\r\n}\r\n\r\n//do nice stuff\r\n//combine group properties (all resists/all stats) and build friendly strings for a ui\r\n//enhanced def/durability/weapon damage.\r\n//lookup socketed compact items (runes/gems) properties for the slot they are in\r\n//compute attributes like str/resists/etc..\r\nexport function enhanceAttributes(char: types.ID2S, mod: string, version: number, config?: types.IConfig): void {\r\n  enhanceItems(char.items, mod, version, char.attributes.level, config);\r\n  enhanceItems([char.golem_item], mod, version, char.attributes.level, config);\r\n  enhanceItems(char.merc_items, mod, version, char.attributes.level, config);\r\n  enhanceItems(char.corpse_items, mod, version, char.attributes.level, config);\r\n  enhancePlayerAttributes(char, mod, version, config);\r\n}\r\n\r\nexport function enhancePlayerAttributes(char: types.ID2S, mod: string, version: number, config?: types.IConfig): void {\r\n  const constants = getConstantData(mod, version);\r\n  const items = char.items.filter((item) => {\r\n    return item.location_id === 1 && item.equipped_id !== 13 && item.equipped_id !== 14;\r\n  });\r\n\r\n  char.item_bonuses = ([] as types.IMagicProperty[]).concat\r\n    .apply(\r\n      [],\r\n      items.map((item) => _allAttributes(item, constants)),\r\n    )\r\n    .filter((attribute) => attribute != null);\r\n  char.item_bonuses = _groupAttributes(char.item_bonuses, constants);\r\n  _enhanceAttributeDescription(char.item_bonuses, constants, char.attributes.level, config);\r\n}\r\n\r\nexport function enhanceItems(\r\n  items: types.IItem[],\r\n  mod: string,\r\n  version: number,\r\n  level = 1,\r\n  config?: types.IConfig,\r\n  parent?: types.IItem,\r\n): void {\r\n  if (!items) {\r\n    return;\r\n  }\r\n  for (const item of items) {\r\n    if (!item) {\r\n      continue;\r\n    }\r\n    if (item.socketed_items && item.socketed_items.length) {\r\n      enhanceItems(item.socketed_items, mod, version, level, config, item);\r\n    }\r\n    enhanceItem(item, mod, version, level, config, parent);\r\n  }\r\n}\r\n\r\n// Bound values (inclusive min and max)\r\nfunction boundValue(v: number, min: number, max: number) {\r\n  return Math.min(max, Math.max(min, v));\r\n}\r\n\r\nexport function enhanceItem(\r\n  item: types.IItem,\r\n  mod: string,\r\n  version: number,\r\n  level = 1,\r\n  config?: types.IConfig,\r\n  parent?: types.IItem,\r\n): void {\r\n  const constants = getConstantData(mod, version);\r\n  if (parent) {\r\n    //socket item.\r\n    const pt = constants.armor_items[parent.type] || constants.weapon_items[parent.type] || constants.other_items[parent.type];\r\n    const t = constants.other_items[item.type];\r\n    if (t.m) {\r\n      item.magic_attributes = _compactAttributes(t.m[pt.gt], constants);\r\n    }\r\n  }\r\n  // Enforce boundaries\r\n  item.level = boundValue(item.level, 1, 99);\r\n  let details = null;\r\n  if (constants.armor_items[item.type]) {\r\n    details = constants.armor_items[item.type];\r\n    item.type_id = ItemType.Armor;\r\n    if (details.maxac) {\r\n      if (item.ethereal == 0) {\r\n        item.defense_rating = details.maxac;\r\n      } else if (item.ethereal == 1) {\r\n        item.defense_rating = Math.floor(details.maxac * 1.5);\r\n      }\r\n    }\r\n  } else if (constants.weapon_items[item.type]) {\r\n    details = constants.weapon_items[item.type];\r\n    item.type_id = ItemType.Weapon;\r\n    const base_damage = {} as types.IWeaponDamage;\r\n    if (item.ethereal == 0) {\r\n      if (details.mind) base_damage.mindam = details.mind;\r\n      if (details.maxd) base_damage.maxdam = details.maxd;\r\n      if (details.min2d) base_damage.twohandmindam = details.min2d;\r\n      if (details.max2d) base_damage.twohandmaxdam = details.max2d;\r\n    } else if (item.ethereal == 1) {\r\n      if (details.mind) base_damage.mindam = Math.floor(details.mind * 1.5);\r\n      if (details.maxd) base_damage.maxdam = Math.floor(details.maxd * 1.5);\r\n      if (details.min2d) base_damage.twohandmindam = Math.floor(details.min2d * 1.5);\r\n      if (details.max2d) base_damage.twohandmaxdam = Math.floor(details.max2d * 1.5);\r\n    }\r\n    item.base_damage = base_damage;\r\n  } else if (constants.other_items[item.type]) {\r\n    item.type_id = ItemType.Other;\r\n    details = constants.other_items[item.type];\r\n  }\r\n  if (details) {\r\n    if (details.n) item.type_name = details.n;\r\n    if (details.rs) item.reqstr = details.rs;\r\n    if (details.rd) item.reqdex = details.rd;\r\n    if (details.i) item.inv_file = details.i;\r\n    if (details.hdi) item.hd_inv_file = details.hdi;\r\n    if (details.ih) item.inv_height = details.ih;\r\n    if (details.iw) item.inv_width = details.iw;\r\n    if (details.it) item.inv_transform = details.it;\r\n    if (details.iq) item.item_quality = details.iq;\r\n    if (details.c) item.categories = details.c;\r\n    if (details.durability) {\r\n      if (item.ethereal == 0) {\r\n        item.current_durability = details.durability;\r\n        item.max_durability = details.durability;\r\n      } else if (item.ethereal == 1) {\r\n        item.current_durability = details.durability - Math.ceil(details.durability / 2) + 1;\r\n        item.max_durability = details.durability - Math.ceil(details.durability / 2) + 1;\r\n      }\r\n    }\r\n    item.total_nr_of_sockets = boundValue(item.total_nr_of_sockets, 0, details.gs || item.inv_width * item.inv_height);\r\n    // Enforce coherence between total_nr_of_sockets & socketed\r\n    if (item.total_nr_of_sockets > 0) {\r\n      item.socketed = 1;\r\n    } else {\r\n      item.socketed = 0;\r\n    }\r\n    // Enforce personalization validity\r\n    if (item.personalized_name && item.personalized_name.length) {\r\n      // Check it is valid (0-16 letters)\r\n      const valid = nameRegex.test(item.personalized_name);\r\n      if (!valid) {\r\n        item.personalized_name = \"\";\r\n        item.personalized = 0;\r\n      } else {\r\n        item.personalized = 1;\r\n      }\r\n    } else {\r\n      item.personalized = 0;\r\n    }\r\n    if (details.ig && details.ig.length && !item.multiple_pictures) {\r\n      // Activate multiple pictures\r\n      item.multiple_pictures = 1;\r\n      item.picture_id = 0;\r\n    } else if (!details.ig && item.multiple_pictures) {\r\n      item.multiple_pictures = 0; // Type changed to a not-multiple pictures one\r\n      item.picture_id = 0;\r\n    }\r\n    if (item.multiple_pictures && details.ig && details.ig.length && details.ig[item.picture_id]) {\r\n      item.inv_file = details.ig[item.picture_id];\r\n    }\r\n    if (item.multiple_pictures && details.hdig && details.hdig.length && details.hdig[item.picture_id]) {\r\n      item.hd_inv_file = details.hdig[item.picture_id];\r\n    }\r\n    // Transform color and specific gfx\r\n    if (item.magic_prefix || item.magic_suffix) {\r\n      if (item.magic_prefix && constants.magic_prefixes[item.magic_prefix]?.tc) {\r\n        item.transform_color = constants.magic_prefixes[item.magic_prefix].tc;\r\n      }\r\n      if (item.magic_suffix && constants.magic_suffixes[item.magic_suffix]?.tc) {\r\n        item.transform_color = constants.magic_suffixes[item.magic_suffix].tc;\r\n      }\r\n    } else if (item.magical_name_ids && item.magical_name_ids.length === 6) {\r\n      for (let i = 0; i < 6; i++) {\r\n        const id = item.magical_name_ids[i];\r\n        if (id) {\r\n          if (i % 2 == 0 && constants.magic_prefixes[id] && constants.magic_prefixes[id]?.tc) {\r\n            // even is prefixes\r\n            item.transform_color = constants.magic_prefixes[id].tc;\r\n          } else if (constants.magic_suffixes[id] && constants.magic_suffixes[id]?.tc) {\r\n            // odd is suffixes\r\n            item.transform_color = constants.magic_suffixes[id].tc;\r\n          }\r\n        }\r\n      }\r\n    } else if (item.unique_id) {\r\n      const unq = constants.unq_items[item.unique_id];\r\n      if (details.ui) {\r\n        item.inv_file = details.ui;\r\n      }\r\n      if (unq && unq.i) {\r\n        item.inv_file = unq.i;\r\n      }\r\n      if (unq && unq.hdi) {\r\n        item.hd_inv_file = unq.hdi;\r\n      }\r\n      if (unq && unq.tc) item.transform_color = unq.tc;\r\n    } else if (item.set_id) {\r\n      const set = constants.set_items[item.set_id];\r\n      if (details.ui) {\r\n        item.inv_file = details.ui;\r\n      }\r\n      if (set && set.i) {\r\n        item.inv_file = set.i;\r\n      }\r\n      if (set && set.hdi) {\r\n        item.hd_inv_file = set.hdi;\r\n      }\r\n      if (set && set.tc) item.transform_color = set.tc;\r\n    }\r\n  }\r\n\r\n  if (item.magic_attributes || item.runeword_attributes || item.socketed_items) {\r\n    item.displayed_magic_attributes = _enhanceAttributeDescription(item.magic_attributes, constants, level, config);\r\n    item.displayed_runeword_attributes = _enhanceAttributeDescription(item.runeword_attributes, constants, level, config);\r\n    item.combined_magic_attributes = _groupAttributes(_allAttributes(item, constants), constants);\r\n    item.displayed_combined_magic_attributes = _enhanceAttributeDescription(item.combined_magic_attributes, constants, level, config);\r\n  }\r\n}\r\n\r\nfunction _enhanceAttributeDescription(\r\n  _magic_attributes: types.IMagicProperty[],\r\n  constants: types.IConstantData,\r\n  level = 1,\r\n  config?: types.IConfig,\r\n): types.IMagicProperty[] {\r\n  if (!_magic_attributes) return [];\r\n\r\n  const magic_attributes: types.IMagicProperty[] = [..._magic_attributes.map((attr) => ({ ...attr }))];\r\n  const dgrps = [0, 0, 0];\r\n  const dgrpsVal = [0, 0, 0];\r\n  for (const property of magic_attributes) {\r\n    const prop = constants.magical_properties[property.id];\r\n    const v = property.values[property.values.length - 1];\r\n    if (prop.dg) {\r\n      if (dgrpsVal[prop.dg - 1] === 0) {\r\n        dgrpsVal[prop.dg - 1] = v;\r\n      }\r\n      if (dgrpsVal[prop.dg - 1] - v === 0) {\r\n        dgrps[prop.dg - 1]++;\r\n      }\r\n    }\r\n  }\r\n  for (const property of magic_attributes) {\r\n    const prop = constants.magical_properties[property.id];\r\n    if (prop == null) {\r\n      throw new Error(`Cannot find Magical Property for id: ${property.id}`);\r\n    }\r\n    let v = property.values[property.values.length - 1];\r\n    if (prop.ob === \"level\") {\r\n      switch (prop.o) {\r\n        case 1: {\r\n          v = Math.floor((level * v) / 100);\r\n          break;\r\n        }\r\n        case 2:\r\n        case 3:\r\n        case 4:\r\n        case 5: {\r\n          v = Math.floor((level * v) / 2 ** prop.op);\r\n          break;\r\n        }\r\n        default: {\r\n          break;\r\n        }\r\n      }\r\n      property.op_stats = prop.os;\r\n      property.op_value = v;\r\n    }\r\n    let descFunc = prop.dF;\r\n    let descString;\r\n    if (v >= 0) {\r\n      if (prop.dP) {\r\n        descString = prop.dP;\r\n      } else if (prop.dN) {\r\n        // Fallback\r\n        descString = prop.dN;\r\n      }\r\n    } else if (v < 0) {\r\n      if (prop.dN) {\r\n        descString = prop.dN;\r\n      } else if (prop.dP) {\r\n        // Fallback\r\n        descString = prop.dP;\r\n      }\r\n    } else {\r\n      descString = \"Missing description\";\r\n    }\r\n    //hack for d2r...?\r\n    if (property.id == 39 || property.id == 41 || property.id == 43 || property.id == 45) {\r\n      descString = prop.dP;\r\n    }\r\n    let descVal = prop.dV;\r\n    let desc2 = prop.d2;\r\n    if (prop.dg && dgrps[prop.dg - 1] === 4) {\r\n      v = dgrpsVal[prop.dg - 1];\r\n      descString = v >= 0 ? prop.dgP : prop.dgN ? prop.dgN : prop.dgP;\r\n      descVal = prop.dgV;\r\n      descFunc = prop.dgF;\r\n      desc2 = prop.dg2;\r\n    }\r\n    if (prop.np) {\r\n      //damage range or enhanced damage.\r\n      let count = 0;\r\n      descString = prop.dR;\r\n\r\n      if (prop.s === \"poisonmindam\") {\r\n        //poisonmindam see https://user.xmission.com/~trevin/DiabloIIv1.09_Magic_Properties.shtml for reference\r\n        const min = Math.floor((property.values[0] * property.values[2]) / 256);\r\n        const max = Math.floor((property.values[1] * property.values[2]) / 256);\r\n        const seconds = Math.floor(property.values[2] / 25);\r\n        property.values = [min, max, seconds];\r\n      }\r\n\r\n      if (property.values[0] === property.values[1]) {\r\n        count++;\r\n        descString = prop.dE;\r\n        //TODO. why???\r\n        if (prop.s === \"item_maxdamage_percent\") {\r\n          descString = `+%d% ${descString.replace(/}/gi, \"\").replace(/%\\+?d%%/gi, \"\")}`;\r\n        }\r\n      }\r\n      property.description = descString.replace(/%d/gi, () => {\r\n        const v = property.values[count++];\r\n        return v;\r\n      });\r\n    } else {\r\n      _descFunc(property, constants, v, descFunc, descVal, descString, desc2);\r\n    }\r\n  }\r\n\r\n  if (config?.sortProperties) {\r\n    //sort using sort order from game.\r\n    magic_attributes.sort((a, b) => constants.magical_properties[b.id].so - constants.magical_properties[a.id].so);\r\n  }\r\n\r\n  for (let i = magic_attributes.length - 1; i >= 1; i--) {\r\n    for (let j = i - 1; j >= 0; j--) {\r\n      if (magic_attributes[i].description === magic_attributes[j].description) {\r\n        magic_attributes[j].visible = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  return magic_attributes;\r\n}\r\n\r\nfunction _compactAttributes(mods: any[], constants: types.IConstantData): types.IMagicProperty[] {\r\n  const magic_attributes = [] as types.IMagicProperty[];\r\n  for (const mod of mods) {\r\n    const properties = constants.properties[mod.m] || [];\r\n    for (let i = 0; i < properties.length; i++) {\r\n      const property = properties[i];\r\n      let stat = property.s;\r\n      switch (property.f) {\r\n        case 5: {\r\n          stat = \"mindamage\";\r\n          break;\r\n        }\r\n        case 6: {\r\n          stat = \"maxdamage\";\r\n          break;\r\n        }\r\n        case 7: {\r\n          stat = \"item_maxdamage_percent\";\r\n          break;\r\n        }\r\n        case 20: {\r\n          stat = \"item_indesctructible\";\r\n          break;\r\n        }\r\n        default: {\r\n          break;\r\n        }\r\n      }\r\n      const id = _itemStatCostFromStat(stat, constants);\r\n      const prop = constants.magical_properties[id];\r\n      if (prop.np) i += prop.np;\r\n      const v = [mod.min, mod.max];\r\n      if (mod.p) {\r\n        v.push(mod.p);\r\n      }\r\n      magic_attributes.push({\r\n        id: id,\r\n        values: v,\r\n        name: prop.s,\r\n      } as types.IMagicProperty);\r\n    }\r\n  }\r\n  return magic_attributes;\r\n}\r\n\r\nfunction _descFunc(\r\n  property: types.IMagicProperty,\r\n  constants: types.IConstantData,\r\n  v: number,\r\n  descFunc: number,\r\n  descVal: number,\r\n  descString: string,\r\n  desc2: string,\r\n) {\r\n  if (!descFunc) {\r\n    return;\r\n  }\r\n  const sign = v >= 0 ? \"+\" : \"\";\r\n  let value = null;\r\n  const desc2Present = descFunc >= 6 && descFunc <= 10;\r\n  switch (descFunc) {\r\n    case 1:\r\n    // +[value] [string1]\r\n    case 6:\r\n    // +[value] [string1] [string2]\r\n    case 12: {\r\n      // +[value] [string1]\r\n      value = `${sign}${v}`;\r\n      break;\r\n    }\r\n    case 2:\r\n    // [value]% [string1]\r\n    case 7: {\r\n      // [value]% [string1] [string2]\r\n      value = `${v}%`;\r\n      break;\r\n    }\r\n    case 3:\r\n    // [value] [string1]\r\n    case 9: {\r\n      // [value] [string1] [string2]\r\n      value = `${v}`;\r\n      break;\r\n    }\r\n    case 4:\r\n    // +[value]% [string1]\r\n    case 8: {\r\n      // +[value]% [string1] [string2]\r\n      value = `${sign}${v}%`;\r\n      break;\r\n    }\r\n    case 5:\r\n    // [value*100/128]% [string1]\r\n    case 10: {\r\n      // [value*100/128]% [string1] [string2]\r\n      if (descString.indexOf(\"%%\") < 0) {\r\n        value = `${(v * 100) / 128}%`;\r\n      } else {\r\n        value = (v * 100) / 128;\r\n      }\r\n      break;\r\n    }\r\n    case 11: {\r\n      // Repairs 1 Durability In [100 / value] Seconds\r\n      property.description = descString.replace(/%d/, (v / 100).toString());\r\n      break;\r\n    }\r\n    case 13: {\r\n      // +[value] to [class] Skill Levels\r\n      const clazz = constants.classes[property.values[0]];\r\n      property.description = `${sign}${v} ${clazz.as}`;\r\n      break;\r\n    }\r\n    case 14: {\r\n      // +[value] to [skilltab] Skill Levels ([class] Only)\r\n      const clazz = constants.classes[property.values[1]];\r\n      const skillTabStr = clazz.ts[property.values[0]];\r\n      descString = _sprintf(skillTabStr, v);\r\n      property.description = `${descString} ${clazz.co}`;\r\n      break;\r\n    }\r\n    case 15: {\r\n      // [chance]% to case [slvl] [skill] on [event]\r\n      const skillId = property.values[1];\r\n      const skill = constants.skills[skillId];\r\n      const skillStr = skill ? skill.s : `Unknown_Skill_${skillId}`;\r\n      descString = _sprintf(descString, property.values[2], property.values[0], skillStr);\r\n      property.description = `${descString}`;\r\n      break;\r\n    }\r\n    case 16: {\r\n      // Level [sLvl] [skill] Aura When Equipped\r\n      const skillId = property.values[0];\r\n      const skill = constants.skills[skillId];\r\n      const skillStr = skill ? skill.s : `Unknown_Skill_${skillId}`;\r\n      property.description = descString.replace(/%d/, v.toString());\r\n      property.description = property.description.replace(/%s/, skillStr);\r\n      break;\r\n    }\r\n    case 17: {\r\n      // [value] [string1] (Increases near [time])\r\n      property.description = `${v} ${descString} (Increases near [time])`;\r\n      break;\r\n    }\r\n    case 18: {\r\n      // [value]% [string1] (Increases near [time])\r\n      property.description = `${v}% ${descString} (Increases near [time])`;\r\n      break;\r\n    }\r\n    case 19: {\r\n      // [value * -1]% [string1]\r\n      property.description = _sprintf(descString, v.toString());\r\n      break;\r\n    }\r\n    case 20: {\r\n      // [value * -1]% [string1]\r\n      value = `${v * -1}%`;\r\n      break;\r\n    }\r\n    case 21: {\r\n      // [value * -1] [string1]\r\n      value = `${v * -1}`;\r\n      break;\r\n    }\r\n    case 22: {\r\n      // [value]% [string1] [montype] (warning: this is bugged in vanilla and doesn't work properly, see CE forum)\r\n      property.description = `${v}% ${descString} [montype]`;\r\n      break;\r\n    }\r\n    case 23: {\r\n      // [value]% [string1] [monster]\r\n      property.description = `${v}% ${descString} [monster]]`;\r\n      break;\r\n    }\r\n    case 24: {\r\n      // Level [lvl] [skill] ([curr]/[max] charges)\r\n      const skillId = property.values[1];\r\n      const skill = constants.skills[skillId];\r\n      const skillStr = skill ? skill.s : `Unknown_Skill_${skillId}`;\r\n      if (descString.indexOf(\"(\") == 0) {\r\n        let count = 0;\r\n        descString = descString.replace(/%d/gi, () => {\r\n          return property.values[2 + count++].toString();\r\n        });\r\n        property.description = `Level ${property.values[0]} ${skillStr} ${descString}`;\r\n      } else {\r\n        property.description = _sprintf(descString, property.values[0], skillStr, property.values[2], property.values[3]);\r\n      }\r\n      break;\r\n    }\r\n    case 27: {\r\n      // +[value] to [skill] ([class] Only)\r\n      const skillId = property.values[0];\r\n      const skill = constants.skills[skillId];\r\n      const skillStr = skill ? skill.s : `Unknown_Skill_${skillId}`;\r\n      const clazz = _classFromCode(skill.c, constants);\r\n      const clazzStr = clazz ? clazz.co : \"\";\r\n      if (descString) {\r\n        property.description = _sprintf(descString, v, skillStr, clazzStr);\r\n      } else {\r\n        property.description = `${sign}${v} to ${skillStr} ${clazz?.co}`;\r\n      }\r\n      break;\r\n    }\r\n    case 28: {\r\n      // +[value] to [skill]\r\n      const skillId = property.values[0];\r\n      const skill = constants.skills[skillId];\r\n      const skillStr = skill ? skill.s : `Unknown_Skill_${skillId}`;\r\n      property.description = `${sign}${v} to ${skillStr}`;\r\n      break;\r\n    }\r\n    case 29: {\r\n      // Diablo regex\r\n      property.description = _sprintf(descString, v.toString());\r\n      break;\r\n    }\r\n    default: {\r\n      throw new Error(`No handler for descFunc: ${descFunc}`);\r\n    }\r\n  }\r\n  if (value) {\r\n    descVal = descVal ? descVal : 0;\r\n    switch (descVal) {\r\n      case 0: {\r\n        property.description = _sprintf(descString, value);\r\n        break;\r\n      }\r\n      case 1: {\r\n        property.description = `${value} ${descString}`;\r\n        break;\r\n      }\r\n      case 2: {\r\n        property.description = `${descString} ${value}`;\r\n        break;\r\n      }\r\n      default: {\r\n        throw new Error(`No handler for descVal: ${descVal}`);\r\n      }\r\n    }\r\n  }\r\n  if (desc2Present) {\r\n    property.description += ` ${desc2}`;\r\n  }\r\n}\r\n\r\nfunction _sprintf(str: string, ...args: any[]): string {\r\n  let i = 0;\r\n  return str\r\n    .replace(/%\\+?d|%\\+?s/gi, (m) => {\r\n      let v = args[i++].toString();\r\n      if (m.indexOf(\"+\") >= 0) {\r\n        v = \"+\" + v;\r\n      }\r\n      return v;\r\n    })\r\n    .replace(\"%%\", \"%\");\r\n}\r\n\r\nfunction _itemStatCostFromStat(stat: string, constants: types.IConstantData): number {\r\n  return constants.magical_properties.findIndex((e) => e && e.s === stat);\r\n}\r\n\r\nfunction _classFromCode(code: string, constants: types.IConstantData): any {\r\n  return constants.classes.filter((e) => e.c === code)[0];\r\n}\r\n\r\nfunction _allAttributes(item: types.IItem, constants: types.IConstantData): types.IMagicProperty[] {\r\n  let socketed_attributes = [] as types.IMagicProperty[];\r\n  if (item.socketed_items) {\r\n    for (const i of item.socketed_items) {\r\n      if (i.magic_attributes) {\r\n        socketed_attributes = socketed_attributes.concat(...JSON.parse(JSON.stringify(i.magic_attributes)));\r\n      }\r\n    }\r\n  }\r\n  const magic_attributes = item.magic_attributes || [];\r\n  const runeword_attributes = item.runeword_attributes || [];\r\n  return [\r\n    ...[],\r\n    ...JSON.parse(JSON.stringify(magic_attributes)),\r\n    ...JSON.parse(JSON.stringify(runeword_attributes)),\r\n    ...JSON.parse(JSON.stringify(socketed_attributes)),\r\n  ].filter((attribute) => attribute != null);\r\n}\r\n\r\nfunction _groupAttributes(all_attributes: types.IMagicProperty[], constants: types.IConstantData): types.IMagicProperty[] {\r\n  const combined_magic_attributes = [] as types.IMagicProperty[];\r\n  for (const magic_attribute of all_attributes) {\r\n    const prop = constants.magical_properties[magic_attribute.id];\r\n    const properties = combined_magic_attributes.filter((e) => {\r\n      //encoded skills need to look at those params too.\r\n      if (prop.e === 3) {\r\n        return e.id === magic_attribute.id && e.values[0] === magic_attribute.values[0] && e.values[1] === magic_attribute.values[1];\r\n      }\r\n      if (prop.dF === 15) {\r\n        return (\r\n          e.id === magic_attribute.id &&\r\n          e.values[0] === magic_attribute.values[0] &&\r\n          e.values[1] === magic_attribute.values[1] &&\r\n          e.values[2] === magic_attribute.values[2]\r\n        );\r\n      }\r\n      if (prop.dF === 16 || prop.dF === 23) {\r\n        return e.id === magic_attribute.id && e.values[0] === magic_attribute.values[0] && e.values[1] === magic_attribute.values[1];\r\n      }\r\n      if (prop.s === \"state\" || prop.s === \"item_nonclassskill\") {\r\n        //state\r\n        return e.id === magic_attribute.id && e.values[0] === magic_attribute.values[0] && e.values[1] === magic_attribute.values[1];\r\n      }\r\n      return e.id === magic_attribute.id;\r\n    });\r\n    if (properties && properties.length) {\r\n      for (let i = 0; i < properties.length; i++) {\r\n        const property = properties[i];\r\n        if (prop.np) {\r\n          //damage props\r\n          property.values[0] += magic_attribute.values[0];\r\n          property.values[1] += magic_attribute.values[1];\r\n          break;\r\n        }\r\n        //only combine attributes if the params for the descFunc are the same.\r\n        let sameParams = true;\r\n        const numValues = prop.e === 3 ? 2 : 1;\r\n        for (let j = 0; j < property.values.length - numValues; j++) {\r\n          sameParams = property.values[j] === magic_attribute.values[j];\r\n          if (!sameParams) {\r\n            break;\r\n          }\r\n        }\r\n        if (sameParams) {\r\n          for (let j = 1; j <= numValues; j++) {\r\n            const idx = property.values.length - j;\r\n            property.values[idx] += magic_attribute.values[idx];\r\n          }\r\n        } else {\r\n          combined_magic_attributes.push({\r\n            id: magic_attribute.id,\r\n            values: magic_attribute.values,\r\n            name: magic_attribute.name,\r\n          } as types.IMagicProperty);\r\n        }\r\n      }\r\n    } else {\r\n      combined_magic_attributes.push({\r\n        id: magic_attribute.id,\r\n        values: magic_attribute.values,\r\n        name: magic_attribute.name,\r\n      } as types.IMagicProperty);\r\n    }\r\n  }\r\n  return combined_magic_attributes;\r\n}\r\n","import * as types from \"./types\";\r\nimport { BitReader } from \"../binary/bitreader\";\r\nimport { BitWriter } from \"../binary/bitwriter\";\r\nimport { getConstantData } from \"./constants\";\r\n\r\n//todo use constants.magical_properties and csvBits\r\nexport function readAttributes(char: types.ID2S, reader: BitReader, mod: string): void {\r\n  const constants = getConstantData(mod, char.header.version);\r\n\r\n  // Stats = magical_properties with \"Saved\" = 1.\r\n  // There are report that only stat ids 0 to 255 can be saved. It doesn't work for stats 256-510.\r\n  const attributes = constants.magical_properties.filter((val, idx) => val && val.c && idx < 256);\r\n\r\n  // Initial values\r\n  char.attributes = attributes.reduce((acc, curr) => {\r\n    acc[curr.s] = 0; // Add the attribute with value 0\r\n    return acc;\r\n  }, {} as types.IAttributes);\r\n\r\n  const header = reader.ReadString(2); //0x0000 [attributes header = 0x67, 0x66 \"gf\"]\r\n  if (header != \"gf\") {\r\n    // header is not present in first save after char is created\r\n    if (char.header.level === 1) {\r\n      const classData = constants.classes.find((c) => c.n === char.header.class).a;\r\n\r\n      char.attributes = {\r\n        strength: +classData.str,\r\n        energy: +classData.int,\r\n        dexterity: +classData.dex,\r\n        vitality: +classData.vit,\r\n        statpts: 0,\r\n        newskills: 0,\r\n        hitpoints: +classData.vit + +classData.hpadd,\r\n        maxhp: +classData.vit + +classData.hpadd,\r\n        mana: +classData.int,\r\n        maxmana: +classData.int,\r\n        stamina: +classData.stam,\r\n        maxstamina: +classData.stam,\r\n        level: 1,\r\n        experience: 0,\r\n        gold: 0,\r\n        goldbank: 0,\r\n      };\r\n\r\n      return;\r\n    }\r\n\r\n    throw new Error(`Attribute header 'gf' not found at position ${reader.offset - 2 * 8}`);\r\n  }\r\n  let bitoffset = 0;\r\n  let id = reader.ReadUInt16(9);\r\n  //read till 0x1ff end of attributes is found\r\n  while (id != 0x1ff) {\r\n    bitoffset += 9;\r\n    const field = constants.magical_properties[id];\r\n    if (field === undefined) {\r\n      throw new Error(`Invalid attribute id: ${id}`);\r\n    }\r\n    const size = field.cB;\r\n    if (size === undefined) {\r\n      throw new Error(`Missing CSV save bits for id: ${id}`);\r\n    }\r\n    char.attributes[field.s] = reader.ReadUInt32(size);\r\n    if (field.cVS) {\r\n      //hitpoints - maxstamina need to be bit shifted\r\n      char.attributes[field.s] >>>= field.cVS;\r\n    }\r\n\r\n    // Next attribute\r\n    bitoffset += size;\r\n    id = reader.ReadUInt16(9);\r\n  }\r\n\r\n  reader.Align();\r\n}\r\n\r\nexport async function writeAttributes(char: types.ID2S, constants: types.IConstantData): Promise<Uint8Array> {\r\n  const writer = new BitWriter();\r\n  writer.WriteString(\"gf\", 2); //0x0000 [attributes header = 0x67, 0x66 \"gf\"]\r\n\r\n  // Stats = magical_properties with \"Saved\" = 1.\r\n  // There are report that only stat ids 0 to 255 can be saved. It doesn't work for stats 256-510.\r\n  const attributes = constants.magical_properties.filter((val, idx) => val && val.c && idx < 256);\r\n\r\n  for (const property of attributes) {\r\n    let value = char.attributes[property.s];\r\n    if (!value) {\r\n      continue;\r\n    }\r\n    const size = property.cB;\r\n    if (size === undefined) {\r\n      throw new Error(`Missing CSV save bits for attribute: ${property}`);\r\n    }\r\n    if (property.cVS) {\r\n      value <<= property.cVS;\r\n    }\r\n    writer.WriteUInt16(property.id, 9);\r\n    writer.WriteUInt32(value, size);\r\n  }\r\n  writer.WriteUInt16(0x1ff, 9); // Attribute 511 is reserved for end tag\r\n  writer.Align();\r\n  return writer.ToArray();\r\n}\r\n","import * as types from \"./types\";\r\n\r\nconst versionedConstants = {\r\n  vanilla: {},\r\n  remodded: {},\r\n};\r\n\r\nfunction getConstantData(mod: string, version: number): types.IConstantData {\r\n  if (!(mod in versionedConstants)) {\r\n    throw new Error(`No constant data found for this mod ${mod}. Supported mods are: ${Object.keys(versionedConstants).join(\", \")}`);\r\n  }\r\n  if (!(version.toString() in versionedConstants[mod])) {\r\n    throw new Error(\r\n      `No constant data found for version ${version} of mod ${mod}. Supported versions are: ${Object.keys(versionedConstants[mod]).join(\r\n        \", \",\r\n      )}`,\r\n    );\r\n  }\r\n  const constants = versionedConstants[mod][version.toString()];\r\n\r\n  return constants;\r\n}\r\n\r\nfunction setConstantData(mod: string, version: number, data: types.IConstantData): void {\r\n  versionedConstants[mod][version.toString()] = data;\r\n}\r\n\r\nexport { getConstantData, setConstantData };\r\n","import * as types from \"./types\";\r\nimport { readHeader, readHeaderData, writeHeader, writeHeaderData, fixHeader } from \"./header\";\r\nimport { readAttributes, writeAttributes } from \"./attributes\";\r\nimport { BitReader } from \"../binary/bitreader\";\r\nimport { BitWriter } from \"../binary/bitwriter\";\r\nimport { readSkills, writeSkills } from \"./skills\";\r\nimport * as items from \"./items\";\r\nimport { getConstantData } from \"./constants\";\r\nimport { enhanceAttributes, enhanceItems } from \"./attribute_enhancer\";\r\n\r\nconst defaultConfig = {\r\n  extendedStash: false,\r\n  sortProperties: true,\r\n} as types.IConfig;\r\n\r\nfunction reader(buffer: Uint8Array) {\r\n  return new BitReader(buffer);\r\n}\r\n\r\nasync function read(buffer: Uint8Array, mod: string, userConfig?: types.IConfig): Promise<types.ID2S> {\r\n  const char = {} as types.ID2S;\r\n  const reader = new BitReader(buffer);\r\n  const config = Object.assign(defaultConfig, userConfig);\r\n  await readHeader(char, reader);\r\n  //could load constants based on version here\r\n  await readHeaderData(char, reader, mod);\r\n  await readAttributes(char, reader, mod);\r\n  await readSkills(char, reader, mod);\r\n  await items.readCharItems(char, reader, mod, config);\r\n  await items.readCorpseItems(char, reader, mod, config);\r\n  if (char.header.status.expansion) {\r\n    await items.readMercItems(char, reader, mod, config);\r\n    await items.readGolemItems(char, reader, mod, config);\r\n  }\r\n  await enhanceAttributes(char, mod, char.header.version, config);\r\n  return char;\r\n}\r\n\r\nasync function readItem(buffer: ArrayBuffer, mod: string, version: number, userConfig?: types.IConfig): Promise<types.IItem> {\r\n  const reader = new BitReader(buffer);\r\n  const config = Object.assign(defaultConfig, userConfig);\r\n  const item = await items.readItem(reader, mod, version, config);\r\n  await enhanceItems([item], mod, version);\r\n  return item;\r\n}\r\n\r\nfunction writer(buffer: Uint8Array) {\r\n  return new BitWriter();\r\n}\r\n\r\nasync function write(data: types.ID2S, mod: string, version: number, userConfig?: types.IConfig): Promise<Uint8Array> {\r\n  const config = Object.assign(defaultConfig, userConfig);\r\n  const writer = new BitWriter();\r\n  data.header.version = version;\r\n  writer.WriteArray(await writeHeader(data));\r\n  const constants = getConstantData(mod, data.header.version);\r\n  writer.WriteArray(await writeHeaderData(data, constants));\r\n  writer.WriteArray(await writeAttributes(data, constants));\r\n  writer.WriteArray(await writeSkills(data));\r\n  writer.WriteArray(await items.writeCharItems(data, mod, version, config));\r\n  writer.WriteArray(await items.writeCorpseItem(data, mod, version, config));\r\n  if (data.header.status.expansion) {\r\n    writer.WriteArray(await items.writeMercItems(data, mod, version, config));\r\n    writer.WriteArray(await items.writeGolemItems(data, mod, version, config));\r\n  }\r\n  await fixHeader(writer);\r\n  return writer.ToArray();\r\n}\r\n\r\nasync function writeItem(item: types.IItem, mod: string, version: number, userConfig?: types.IConfig): Promise<Uint8Array> {\r\n  const config = Object.assign(defaultConfig, userConfig);\r\n  const writer = new BitWriter();\r\n  writer.WriteArray(await items.writeItem(item, mod, version, config));\r\n  return writer.ToArray();\r\n}\r\n\r\nexport { reader, writer, read, write, readItem, writeItem };\r\n","import * as types from \"./types\";\r\nimport { BitReader } from \"../binary/bitreader\";\r\nimport { BitWriter } from \"../binary/bitwriter\";\r\nimport { getConstantData } from \"./constants\";\r\n\r\nexport async function readHeader(char: types.ID2S, reader: BitReader) {\r\n  char.header = {} as types.IHeader;\r\n  //0x0000\r\n  char.header.identifier = reader.ReadUInt32().toString(16).padStart(8, \"0\");\r\n  if (char.header.identifier != \"aa55aa55\") {\r\n    throw new Error(`D2S identifier 'aa55aa55' not found at position ${reader.offset - 4 * 8}`);\r\n  }\r\n  //0x0004\r\n  char.header.version = reader.ReadUInt32();\r\n}\r\n\r\nexport async function readHeaderData(char: types.ID2S, reader: BitReader, mod: string) {\r\n  const constants = getConstantData(mod, char.header.version);\r\n  const v = await _versionSpecificHeader(char.header.version);\r\n  if (v == null) {\r\n    throw new Error(`Cannot parse version: ${char.header.version}`);\r\n  }\r\n  v.readHeader(char, reader, constants);\r\n}\r\n\r\nexport async function writeHeader(char: types.ID2S): Promise<Uint8Array> {\r\n  const writer = new BitWriter();\r\n  writer.WriteUInt32(parseInt(char.header.identifier, 16)).WriteUInt32(char.header.version);\r\n\r\n  return writer.ToArray();\r\n}\r\n\r\nexport async function writeHeaderData(char: types.ID2S, constants: types.IConstantData): Promise<Uint8Array> {\r\n  const writer = new BitWriter();\r\n  const v = await _versionSpecificHeader(char.header.version);\r\n  if (v == null) {\r\n    throw new Error(`Cannot parse version: ${char.header.version}`);\r\n  }\r\n  v.writeHeader(char, writer, constants);\r\n\r\n  return writer.ToArray();\r\n}\r\n\r\nexport async function fixHeader(writer: BitWriter) {\r\n  let checksum = 0;\r\n  const eof = writer.length / 8;\r\n  writer.SeekByte(0x0008).WriteUInt32(eof);\r\n  writer.SeekByte(0x000c).WriteUInt32(0);\r\n  for (let i = 0; i < eof; i++) {\r\n    let byte = writer.SeekByte(i).PeekBytes(1)[0];\r\n    if (checksum & 0x80000000) {\r\n      byte += 1;\r\n    }\r\n    checksum = byte + checksum * 2;\r\n    //hack make it a uint32\r\n    checksum >>>= 0;\r\n  }\r\n  //checksum pos\r\n  writer.SeekByte(0x000c).WriteUInt32(checksum);\r\n}\r\n\r\n/**\r\n * Save Version\r\n * 0x47, 0x0, 0x0, 0x0 = <1.06\r\n * 0x59, 0x0, 0x0, 0x0 = 1.08 = version\r\n * 0x5c, 0x0, 0x0, 0x0 = 1.09 = version\r\n * 0x60, 0x0, 0x0, 0x0 = 1.13c = version\r\n * 0x62, 0x0, 0x0, 0x0 = 1.2 = version\r\n * */\r\nasync function _versionSpecificHeader(version: number) {\r\n  switch (version) {\r\n    case 0x60: {\r\n      return await import(`./versions/default_header`);\r\n    }\r\n    default: {\r\n      return await import(`./versions/default_header`);\r\n    }\r\n  }\r\n}\r\n","export * from \"./d2s\";\r\nexport { readHeader, readHeaderData, writeHeader, writeHeaderData, fixHeader } from \"./header\";\r\nexport { readAttributes, writeAttributes } from \"./attributes\";\r\nexport { readSkills, writeSkills } from \"./skills\";\r\nexport { enhanceAttributes, enhanceItems, enhancePlayerAttributes } from \"./attribute_enhancer\";\r\nexport { getConstantData, setConstantData } from \"./constants\";\r\nexport { ItemType, Quality } from \"./items\";\r\nexport * as types from \"./types\";\r\nexport * from \"./utils\";\r\n","import * as types from \"./types\";\r\nimport { BitReader } from \"../binary/bitreader\";\r\nimport { BitWriter } from \"../binary/bitwriter\";\r\nimport { getConstantData } from \"./constants\";\r\n\r\nexport enum ItemType {\r\n  Armor = 0x01,\r\n  Shield = 0x02, //treated the same as armor... only here to be able to parse nokkas jsons\r\n  Weapon = 0x03,\r\n  Other = 0x04,\r\n}\r\n\r\nexport enum Quality {\r\n  Low = 0x01,\r\n  Normal = 0x02,\r\n  Superior = 0x03,\r\n  Magic = 0x04,\r\n  Set = 0x05,\r\n  Rare = 0x06,\r\n  Unique = 0x07,\r\n  Crafted = 0x08,\r\n}\r\n\r\n// Right now I'm missing characters (case sensitive) E, F, I, J, L, M, Q, U, X.\r\n// prettier-ignore\r\n//huffman tree\r\nconst HUFFMAN = [\r\n  /*0*/ [\r\n    /*00*/ [\r\n      /*000*/ [\r\n        /*0000*/ [\r\n          /*00000*/ \"w\",\r\n          /*10000*/ \"u\"\r\n        ],\r\n        /*1000*/ [\r\n          /*01000*/ [\r\n            /*001000*/ \"8\",\r\n            /*101000*/ [\r\n              /*0101000*/ \"y\",\r\n              /*1101000*/ [\r\n                /*01101000*/ \"5\",\r\n                /*11101000*/ [\r\n                  /*011101000*/ \"j\",\r\n                  /*111101000*/ [\r\n                    /*ReMoDDeD adds - caps - begin*/\r\n                    /*0 111101000*/ [\r\n                      /*00 111101000*/ [\r\n                        /*000 111101000*/ [\r\n                          /*0000 111101000*/ [\r\n                            /*00000 111101000*/ [\r\n                              /*000000 111101000*/ [\r\n                                /*0000000 111101000*/ [\r\n                                ],\r\n                                /*1000000 111101000*/ []\r\n                              ],\r\n                              /*100000 111101000*/ [\r\n                                /*0100000 111101000*/ \"N\",\r\n                                /*1100000 111101000*/ []\r\n                              ]\r\n                            ],\r\n                            /*10000 111101000*/ [\r\n                              /*010000 111101000*/ [\r\n                                /*0010000 111101000*/ [],\r\n                                /*1010000 111101000*/ []\r\n                              ],\r\n                              /*110000 111101000*/ [\r\n                                /*0110000 111101000*/ [],\r\n                                /*1110000 111101000*/ []\r\n                              ]\r\n                            ]\r\n                          ],\r\n                          /*1000 111101000*/ [\r\n                            /*01000 111101000*/ [\r\n                              /*001000 111101000*/ [\r\n                                /*0001000 111101000*/ [],\r\n                                /*1001000 111101000*/ []\r\n                              ],\r\n                              /*101000 111101000*/ [\r\n                                /*0101000 111101000*/ [],\r\n                                /*1101000 111101000*/ []\r\n                              ]\r\n                            ],\r\n                            /*11000 111101000*/ [\r\n                              /*011000 111101000*/ [\r\n                                /*0011000 111101000*/ [],\r\n                                /*1011000 111101000*/ []\r\n                              ],\r\n                              /*111000 111101000*/ [\r\n                                /*0111000 111101000*/ [],\r\n                                /*1111000 111101000*/ []\r\n                              ]\r\n                            ]\r\n                          ]\r\n                        ],\r\n                        /*100 111101000*/ [\r\n                          /*0100 111101000*/ [\r\n                            /*00100 111101000*/ [\r\n                              /*000100 111101000*/ [\r\n                                /*0000100 111101000*/ [],\r\n                                /*1000100 111101000*/ []\r\n                              ],\r\n                              /*100100 111101000*/ [\r\n                                /*0100100 111101000*/ [],\r\n                                /*1100100 111101000*/ []\r\n                              ]\r\n                            ],\r\n                            /*10100 111101000*/ [\r\n                              /*010100 111101000*/ [\r\n                                /*0010100 111101000*/ [],\r\n                                /*1010100 111101000*/ []\r\n                              ],\r\n                              /*110100 111101000*/ [\r\n                                /*0110100 111101000*/ [],\r\n                                /*1110100 111101000*/ []\r\n                              ]\r\n                            ]\r\n                          ],\r\n                          /*1100 111101000*/ [\r\n                            /*01100 111101000*/ [\r\n                              /*011000 111101000*/ [\r\n                                /*0011000 111101000*/ [],\r\n                                /*1011000 111101000*/ []\r\n                              ],\r\n                              /*111000 111101000*/ [\r\n                                /*0111000 111101000*/ [],\r\n                                /*1111000 111101000*/ []\r\n                              ]\r\n                            ],\r\n                            /*11100 111101000*/ [\r\n                              /*011100 111101000*/ [\r\n                                /*0011100 111101000*/ [],\r\n                                /*1011100 111101000*/ []\r\n                              ],\r\n                              /*111100 111101000*/ [\r\n                                /*0111100 111101000*/ [],\r\n                                /*1111100 111101000*/ []\r\n                              ]\r\n                            ]\r\n                          ]\r\n                        ]\r\n                      ],\r\n                      /*10 111101000*/ [\r\n                        /*010 111101000*/ [\r\n                          /*0010 111101000*/ [\r\n                            /*00010 111101000*/ [\r\n                              /*000010 111101000*/ [\r\n                                /*0000010 111101000*/ [],\r\n                                /*1000010 111101000*/ []\r\n                              ],\r\n                              /*100010 111101000*/ [\r\n                                /*0100010 111101000*/ [],\r\n                                /*1100010 111101000*/ []\r\n                              ]\r\n                            ],\r\n                            /*10010 111101000*/ [\r\n                              /*010010 111101000*/ [\r\n                                /*0010010 111101000*/ [],\r\n                                /*1010010 111101000*/ []\r\n                              ],\r\n                              /*110010 111101000*/ [\r\n                                /*0110010 111101000*/ [],\r\n                                /*1110010 111101000*/ []\r\n                              ]\r\n                            ]\r\n                          ],\r\n                          /*1010 111101000*/ [\r\n                            /*01010 111101000*/ [\r\n                              /*001010 111101000*/ [\r\n                                /*0001010 111101000*/ [],\r\n                                /*1001010 111101000*/ []\r\n                              ],\r\n                              /*101010 111101000*/ [\r\n                                /*0101010 111101000*/ [],\r\n                                /*1101010 111101000*/ []\r\n                              ]\r\n                            ],\r\n                            /*11010 111101000*/ [\r\n                              /*011010 111101000*/ [\r\n                                /*0011010 111101000*/ [],\r\n                                /*1011010 111101000*/ []\r\n                              ],\r\n                              /*111010 111101000*/ [\r\n                                /*0111010 111101000*/ [\r\n                                  /*00111010 111101000*/ \"A\",\r\n                                  /*10111010 111101000*/ []\r\n                                ],\r\n                                /*1111010 111101000*/ []\r\n                              ]\r\n                            ]\r\n                          ]\r\n                        ],\r\n                        /*110 111101000*/ [\r\n                          /*0110 111101000*/ [\r\n                            /*00110 111101000*/ [\r\n                              /*000110 111101000*/ [\r\n                                /*0000110 111101000*/ [],\r\n                                /*1000110 111101000*/ []\r\n                              ],\r\n                              /*100110 111101000*/ [\r\n                                /*0100110 111101000*/ [],\r\n                                /*1100110 111101000*/ []\r\n                              ]\r\n                            ],\r\n                            /*10110 111101000*/ [\r\n                              /*010110 111101000*/ [\r\n                                /*0010110 111101000*/ [],\r\n                                /*1010110 111101000*/ [\r\n                                  /*01010110 111101000*/ \"S\",\r\n                                  /*11010110 111101000*/  []\r\n                                ]\r\n                              ],\r\n                              /*110110 111101000*/ [\r\n                                /*0110110 111101000*/ [],\r\n                                /*1110110 111101000*/ []\r\n                              ]\r\n                            ]\r\n                          ],\r\n                          /*1110 111101000*/ [\r\n                            /*01110 111101000*/ [\r\n                              /*001110 111101000*/ [\r\n                                /*0001110 111101000*/ [],\r\n                                /*1001110 111101000*/ []\r\n                              ],\r\n                              /*101110 111101000*/ [\r\n                                /*0101110 111101000*/ [],\r\n                                /*1101110 111101000*/ []\r\n                              ]\r\n                            ],\r\n                            /*11110 111101000*/ [\r\n                              /*011110 111101000*/ [\r\n                                /*0011110 111101000*/ [],\r\n                                /*1011110 111101000*/ []\r\n                              ],\r\n                              /*111110 111101000*/ [\r\n                                /*0111110 111101000*/ [],\r\n                                /*1111110 111101000*/ []\r\n                              ]\r\n                            ]\r\n                          ]\r\n                        ]\r\n                      ]\r\n                    ],\r\n                    /*1 111101000*/ [\r\n                      /*01 111101000*/ [\r\n                        /*001 111101000*/ [\r\n                          /*0001 111101000*/ [\r\n                            /*00001 111101000*/ [\r\n                              /*000001 111101000*/ [\r\n                                /*0000001 111101000*/ [],\r\n                                /*1000001 111101000*/ []\r\n                              ],\r\n                              /*100001 111101000*/ [\r\n                                /*0100001 111101000*/ [\r\n                                  /*00100001 111101000*/ \"Z\",\r\n                                  /*10100001 111101000*/ []\r\n                                ],\r\n                                /*1100001 111101000*/ []\r\n                              ]\r\n                            ],\r\n                            /*10001 111101000*/ [\r\n                              /*010001 111101000*/ [\r\n                                /*0010001 111101000*/ [],\r\n                                /*1010001 111101000*/ [\r\n                                  /*01010001 111101000*/ \"T\",\r\n                                  /*11010001 111101000*/ []\r\n                                ]\r\n                              ],\r\n                              /*110001 111101000*/ [\r\n                                /*0110001 111101000*/ [],\r\n                                /*1110001 111101000*/ []\r\n                              ]\r\n                            ]\r\n                          ],\r\n                          /*1001 111101000*/ [\r\n                            /*01001 111101000*/ [\r\n                              /*001001 111101000*/ [\r\n                                /*0001001 111101000*/ [\r\n                                  /*00001001 111101000*/ [],\r\n                                  /*10001001 111101000*/ \"V\"\r\n                                ],\r\n                                /*1001001 111101000*/ []\r\n                              ],\r\n                              /*101001 111101000*/ [\r\n                                /*0101001 111101000*/ [],\r\n                                /*1101001 111101000*/ []\r\n                              ]\r\n                            ],\r\n                            /*11001 111101000*/ [\r\n                              /*011001 111101000*/ [\r\n                                /*0011001 111101000*/ [],\r\n                                /*1011001 111101000*/ []\r\n                              ],\r\n                              /*111001 111101000*/ [\r\n                                /*0111001 111101000*/ [],\r\n                                /*1111001 111101000*/ [\r\n                                  undefined,\r\n                                  \"D\"\r\n                                ]\r\n                              ]\r\n                            ]\r\n                          ]\r\n                        ],\r\n                        /*101 111101000*/ [\r\n                          /*0101 111101000*/ [\r\n                            /*00101 111101000*/ [\r\n                              /*000101 111101000*/ [\r\n                                /*0000101 111101000*/ [],\r\n                                /*1000101 111101000*/ []\r\n                              ],\r\n                              /*100101 111101000*/ [\r\n                                /*0100101 111101000*/ [\r\n                                  /*00100101 111101000*/ \"K\",\r\n                                  /*10100101 111101000*/ [] \r\n                                ],\r\n                                /*1100101 111101000*/ [\r\n                                  /*01100101 111101000*/ [],\r\n                                  /*11100101 111101000*/  \"P\"\r\n                                ]\r\n                              ]\r\n                            ],\r\n                            /*10101 111101000*/ [\r\n                              /*010101 111101000*/ [\r\n                                /*0010101 111101000*/ [],\r\n                                /*1010101 111101000*/ [\r\n                                  /*01010101 111101000*/ [],\r\n                                  /*11010101 111101000*/ \"G\"\r\n                                ]\r\n                              ],\r\n                              /*110101 111101000*/ [\r\n                                /*0110101 111101000*/ [],\r\n                                /*1110101 111101000*/ []\r\n                              ]\r\n                            ]\r\n                          ],\r\n                          /*1101 111101000*/ [\r\n                            /*01101 111101000*/ [\r\n                              /*001101 111101000*/ [\r\n                                /*0001101 111101000*/ [],\r\n                                /*1001101 111101000*/ []\r\n                              ],\r\n                              /*101101 111101000*/ [\r\n                                /*0101101 111101000*/ [],\r\n                                /*1101101 111101000*/ []\r\n                              ]\r\n                            ],\r\n                            /*11101 111101000*/ [\r\n                              /*011101 111101000*/ [\r\n                                /*0011101 111101000*/ [\r\n                                  /*0011101 111101000*/ [],\r\n                                  /*1011101 111101000*/ \"H\"\r\n                                ],\r\n                                /*1011101 111101000*/ []\r\n                              ],\r\n                              /*111101 111101000*/ [\r\n                                /*0111101 111101000*/ [],\r\n                                /*1111101 111101000*/ []\r\n                              ]\r\n                            ]\r\n                          ]\r\n                        ]\r\n                      ],\r\n                      /*11 111101000*/ [\r\n                        /*011 111101000*/ [\r\n                          /*0011 111101000*/ [\r\n                            /*00011 111101000*/ [\r\n                              /*000011 111101000*/ [\r\n                                /*0000011 111101000*/ [],\r\n                                /*1000011 111101000*/ []\r\n                              ],\r\n                              /*100011 111101000*/ [\r\n                                /*0100011 111101000*/ [],\r\n                                /*1100011 111101000*/ []\r\n                              ]\r\n                            ],\r\n                            /*10011 111101000*/ [\r\n                              /*010011 111101000*/ [\r\n                                /*0010011 111101000*/ [],\r\n                                /*1010011 111101000*/ []\r\n                              ],\r\n                              /*110011 111101000*/ [\r\n                                /*0110011 111101000*/ [],\r\n                                /*1110011 111101000*/ [\r\n                                  /*01110011 111101000*/ \"B\",\r\n                                  /*11110011 111101000*/ []\r\n                                ]\r\n                              ]\r\n                            ]\r\n                          ],\r\n                          /*1011 111101000*/ [\r\n                            /*01011 111101000*/ [\r\n                              /*001011 111101000*/ [\r\n                                /*0001011 111101000*/ [],\r\n                                /*1001011 111101000*/ []\r\n                              ],\r\n                              /*101011 111101000*/ [\r\n                                /*0101011 111101000*/ [],\r\n                                /*1101011 111101000*/ []\r\n                              ]\r\n                            ],\r\n                            /*11011 111101000*/ [\r\n                              /*011011 111101000*/ [\r\n                                /*0011011 111101000*/ [\r\n                                  /*00011011 111101000*/ [],\r\n                                  /*10011011 111101000*/ \"C\"\r\n                                ],\r\n                                /*1011011 111101000*/ []\r\n                              ],\r\n                              /*111011 111101000*/ [\r\n                                /*0111011 111101000*/ [],\r\n                                /*1111011 111101000*/ []\r\n                              ]\r\n                            ]\r\n                          ]\r\n                        ],\r\n                        /*111 111101000*/ [\r\n                          /*0111 111101000*/ [\r\n                            /*00111 111101000*/ [\r\n                              /*000111 111101000*/ [\r\n                                /*0000111 111101000*/ [],\r\n                                /*1000111 111101000*/ []\r\n                              ],\r\n                              /*100111 111101000*/ [\r\n                                /*0100111 111101000*/ [],\r\n                                /*1100111 111101000*/ [\r\n                                  /*01100111 111101000*/ [],\r\n                                  /*11100111 111101000*/ \"R\"\r\n                                ]\r\n                              ]\r\n                            ],\r\n                            /*10111 111101000*/ [\r\n                              /*010111 111101000*/ [\r\n                                /*0010111 111101000*/ [],\r\n                                /*1010111 111101000*/ [\r\n                                  /*01010111 111101000*/ [],\r\n                                  /*11010111 111101000*/ \"O\"\r\n                                ]\r\n                              ],\r\n                              /*110111 111101000*/ [\r\n                                /*0110111 111101000*/ [],\r\n                                /*1110111 111101000*/ [\r\n                                  /*01110111 111101000*/ \"W\",\r\n                                  /*11110111 111101000*/ []\r\n                                ]\r\n                              ]\r\n                            ]\r\n                          ],\r\n                          /*1111 111101000*/ [\r\n                            /*01111 111101000*/ [\r\n                              /*001111 111101000*/ [\r\n                                /*0001111 111101000*/ [],\r\n                                /*1001111 111101000*/ []\r\n                              ],\r\n                              /*101111 111101000*/ [\r\n                                /*0101111 111101000*/ [],\r\n                                /*1101111 111101000*/ []\r\n                              ]\r\n                            ],\r\n                            /*11111 111101000*/ [\r\n                              /*011111 111101000*/ [\r\n                                /*0011111 111101000*/ [],\r\n                                /*1011111 111101000*/ []\r\n                              ],\r\n                              /*111111 111101000*/ [\r\n                                /*0111111 111101000*/ [\r\n                                  /*00111111 111101000*/ [],\r\n                                  /*10111111 111101000*/ \"Y\"\r\n                                ],\r\n                                /*1111111 111101000*/ []\r\n                              ]\r\n                            ]\r\n                          ]\r\n                        ]\r\n                      ]\r\n                    ]\r\n                    /*ReMoDDeD adds - end*/\r\n                  ]\r\n                ]\r\n              ]\r\n            ]\r\n          ]\r\n          ,\r\n          /*11000*/ \"h\"\r\n        ]\r\n      ]\r\n      ,\r\n      /*100*/ [\r\n        /*0100*/ \"s\",\r\n        /*1100*/ [\r\n          /*01100*/ [\r\n            /*001100*/ \"2\",\r\n            /*101100*/ \"n\"\r\n          ],\r\n          /*11100*/ \"x\"\r\n        ]\r\n      ]\r\n    ]\r\n    ,\r\n    /*10*/ [\r\n      /*010*/ [\r\n        /*0010*/ [\r\n          /*00010*/ \"c\",\r\n          /*10010*/ [\r\n            /*010010*/ \"k\",\r\n            /*110010*/ \"f\"\r\n          ]\r\n        ],\r\n        /*1010*/ \"b\"\r\n      ],\r\n      /*110*/ [\r\n        /*0110*/ [\r\n          /*00110*/ \"t\",\r\n          /*10110*/ \"m\"\r\n        ],\r\n        /*1110*/ [\r\n          /*01110*/ \"9\",\r\n          /*11110*/ \"7\"\r\n        ]\r\n      ]\r\n    ]\r\n  ]\r\n  ,\r\n  /*1*/ [\r\n    /*01*/ \" \",\r\n    /*11*/ [\r\n      /*011*/ [\r\n        /*0011*/ [\r\n          /*00011*/ [\r\n            /*000011*/ \"e\",\r\n            /*100011*/ \"d\"\r\n          ],\r\n          /*10011*/ \"p\"\r\n        ],\r\n        /*1011*/ [\r\n          /*01011*/ \"g\",\r\n          /*11011*/ [\r\n            /*011011*/ [\r\n              /*0011011*/ [\r\n                /*00011011*/ \"z\",\r\n                /*10011011*/ \"q\"\r\n              ],\r\n              /*1011011*/ \"3\"\r\n            ],\r\n            /*111011*/ [\r\n              /*0111011*/ \"v\",\r\n              /*1111011*/ \"6\"\r\n            ]\r\n          ]\r\n        ]\r\n      ]\r\n      ,\r\n      /*111*/ [\r\n        /*0111*/ [\r\n          /*00111*/ \"r\",\r\n          /*10111*/ \"l\"\r\n        ],\r\n        /*1111*/ [\r\n          /*01111*/ \"a\",\r\n          /*11111*/ [\r\n            /*011111*/ [\r\n              /*0011111*/ \"1\",\r\n              /*1011111*/ [\r\n                /*01011111*/ \"4\",\r\n                /*11011111*/ \"0\"\r\n              ]\r\n            ],\r\n            /*111111*/ [\r\n              /*0111111*/ \"i\",\r\n              /*1111111*/ \"o\"\r\n            ]\r\n          ]\r\n        ]\r\n      ]\r\n    ]\r\n  ]\r\n];\r\n\r\n// prettier-ignore\r\nconst HUFFMAN_LOOKUP = {\r\n  \"0\": { \"v\": 223, \"l\": 8 }, /*11011111*/\r\n  \"1\": { \"v\": 31, \"l\": 7 }, /*0011111*/\r\n  \"2\": { \"v\": 12, \"l\": 6 }, /*001100*/\r\n  \"3\": { \"v\": 91, \"l\": 7 }, /*1011011*/\r\n  \"4\": { \"v\": 95, \"l\": 8 }, /*01011111*/\r\n  \"5\": { \"v\": 104, \"l\": 8 }, /*01101000*/\r\n  \"6\": { \"v\": 123, \"l\": 7 }, /*1111011*/\r\n  \"7\": { \"v\": 30, \"l\": 5 }, /*11110*/\r\n  \"8\": { \"v\": 8, \"l\": 6 }, /*001000*/\r\n  \"9\": { \"v\": 14, \"l\": 5 }, /*01110*/\r\n  \" \": { \"v\": 1, \"l\": 2 }, /*01*/\r\n  \"a\": { \"v\": 15, \"l\": 5 }, /*01111*/\r\n  \"b\": { \"v\": 10, \"l\": 4 }, /*1010*/\r\n  \"c\": { \"v\": 2, \"l\": 5 }, /*00010*/\r\n  \"d\": { \"v\": 35, \"l\": 6 }, /*100011*/\r\n  \"e\": { \"v\": 3, \"l\": 6 }, /*000011*/\r\n  \"f\": { \"v\": 50, \"l\": 6 }, /*110010*/\r\n  \"g\": { \"v\": 11, \"l\": 5 }, /*01011*/\r\n  \"h\": { \"v\": 24, \"l\": 5 }, /*11000*/\r\n  \"i\": { \"v\": 63, \"l\": 7 }, /*0111111*/\r\n  \"j\": { \"v\": 232, \"l\": 9 }, /*011101000*/\r\n  \"k\": { \"v\": 18, \"l\": 6 }, /*010010*/\r\n  \"l\": { \"v\": 23, \"l\": 5 }, /*10111*/\r\n  \"m\": { \"v\": 22, \"l\": 5 }, /*10110*/\r\n  \"n\": { \"v\": 44, \"l\": 6 }, /*101100*/\r\n  \"o\": { \"v\": 127, \"l\": 7 }, /*1111111*/\r\n  \"p\": { \"v\": 19, \"l\": 5 }, /*10011*/\r\n  \"q\": { \"v\": 155, \"l\": 8 }, /*10011011*/\r\n  \"r\": { \"v\": 7, \"l\": 5 }, /*00111*/\r\n  \"s\": { \"v\": 4, \"l\": 4 }, /*0100*/\r\n  \"t\": { \"v\": 6, \"l\": 5 }, /*00110*/\r\n  \"u\": { \"v\": 16, \"l\": 5 }, /*10000*/\r\n  \"v\": { \"v\": 59, \"l\": 7 }, /*0111011*/\r\n  \"w\": { \"v\": 0, \"l\": 5 }, /*00000*/\r\n  \"x\": { \"v\": 28, \"l\": 5 }, /*11100*/\r\n  \"y\": { \"v\": 40, \"l\": 7 }, /*0101000*/\r\n  \"z\": { \"v\": 27, \"l\": 8 }, /*00011011*/\r\n  \"A\": { \"v\": 30184, \"l\": 17 }, /*00111010111101000*/\r\n  \"B\": { \"v\": 59368, \"l\": 17 }, /*01110011111101000*/\r\n  \"C\": { \"v\": 79848, \"l\": 17 }, /*10011011111101000*/\r\n  \"D\": { \"v\": 127976, \"l\": 17 }, /*11111001111101000*/\r\n  //\"E\": { \"v\": 0, \"l\": 0 }, /**/\r\n  //\"F\": { \"v\": 0, \"l\": 0 }, /**/\r\n  \"G\": { \"v\": 109544, \"l\": 17 }, /*11010101111101000*/\r\n  \"H\": { \"v\": 80872, \"l\": 17 }, /**/\r\n  //\"I\": { \"v\": 0, \"l\": 0 }, /**/\r\n  //\"J\": { \"v\": 0, \"l\": 0 }, /**/\r\n  \"K\": { \"v\": 19432, \"l\": 17 }, /*00100101111101000*/\r\n  //\"L\": { \"v\": 0, \"l\": 0 }, /**/\r\n  //\"M\": { \"v\": 0, \"l\": 0 }, /**/\r\n  \"N\": { \"v\": 16872, \"l\": 16 }, /*0100000111101000*/\r\n  \"O\": { \"v\": 110568, \"l\": 17 }, /*11010111111101000*/\r\n  \"P\": { \"v\": 117736, \"l\": 17 }, /*11100101111101000*/\r\n  //\"Q\": { \"v\": 0, \"l\": 0 }, /**/\r\n  \"R\": { \"v\": 118760, \"l\": 17 }, /*11100111111101000*/\r\n  \"S\": { \"v\": 44520, \"l\": 17 }, /*01010110111101000*/\r\n  \"T\": { \"v\": 41960, \"l\": 17 }, /*01010001111101000*/\r\n  //\"U\": { \"v\": 0, \"l\": 0 }, /**/\r\n  \"V\": { \"v\": 70632, \"l\": 17 }, /*10001001111101000*/\r\n  \"W\": { \"v\": 61416, \"l\": 17 }, /*01110111111101000*/\r\n  //\"X\": { \"v\": 0, \"l\": 0 }, /**/\r\n  \"Y\": { \"v\": 98280, \"l\": 17 }, /*10111111111101000*/\r\n  \"Z\": { \"v\": 17384, \"l\": 17 } /*00100001111101000*/\r\n};\r\n\r\nexport async function readCharItems(char: types.ID2S, reader: BitReader, mod: string, config: types.IConfig): Promise<void> {\r\n  char.items = await readItems(reader, mod, char.header.version, config, char);\r\n}\r\n\r\nexport async function writeCharItems(char: types.ID2S, mod: string, version: number, config: types.IConfig): Promise<Uint8Array> {\r\n  const writer = new BitWriter();\r\n  writer.WriteArray(await writeItems(char.items, mod, version, config));\r\n  return writer.ToArray();\r\n}\r\n\r\nexport async function readMercItems(char: types.ID2S, reader: BitReader, mod: string, config: types.IConfig): Promise<void> {\r\n  char.merc_items = [] as types.IItem[];\r\n  const header = reader.ReadString(2); //0x0000 [merc item list header = \"jf\"]\r\n  if (header !== \"jf\") {\r\n    // header is not present in first save after char is created\r\n    if (char?.header.level === 1) {\r\n      return;\r\n    }\r\n\r\n    throw new Error(`Mercenary header 'jf' not found at position ${reader.offset - 2 * 8}`);\r\n  }\r\n  if (char.header.merc_id && parseInt(char.header.merc_id, 16) !== 0) {\r\n    char.merc_items = await readItems(reader, mod, char.header.version, config, char);\r\n  }\r\n}\r\n\r\nexport async function writeMercItems(char: types.ID2S, mod: string, version: number, config: types.IConfig): Promise<Uint8Array> {\r\n  const writer = new BitWriter();\r\n  writer.WriteString(\"jf\", 2);\r\n  if (char.header.merc_id && parseInt(char.header.merc_id, 16) !== 0) {\r\n    char.merc_items = char.merc_items || [];\r\n    writer.WriteArray(await writeItems(char.merc_items, mod, version, config));\r\n  }\r\n  return writer.ToArray();\r\n}\r\n\r\nexport async function readGolemItems(char: types.ID2S, reader: BitReader, mod: string, config: types.IConfig): Promise<void> {\r\n  const header = reader.ReadString(2); //0x0000 [golem item list header = \"kf\"]\r\n  if (header !== \"kf\") {\r\n    // header is not present in first save after char is created\r\n    if (char?.header.level === 1) {\r\n      return;\r\n    }\r\n\r\n    throw new Error(`Golem header 'kf' not found at position ${reader.offset - 2 * 8}`);\r\n  }\r\n  const has_golem = reader.ReadUInt8();\r\n  if (has_golem === 1) {\r\n    char.golem_item = await readItem(reader, mod, char.header.version, config);\r\n  }\r\n}\r\n\r\nexport async function writeGolemItems(char: types.ID2S, mod: string, version: number, config: types.IConfig): Promise<Uint8Array> {\r\n  const writer = new BitWriter();\r\n  writer.WriteString(\"kf\", 2);\r\n  if (char.golem_item) {\r\n    writer.WriteUInt8(1);\r\n    writer.WriteArray(await writeItem(char.golem_item, mod, version, config));\r\n  } else {\r\n    writer.WriteUInt8(0);\r\n  }\r\n  return writer.ToArray();\r\n}\r\n\r\nexport async function readCorpseItems(char: types.ID2S, reader: BitReader, mod: string, config: types.IConfig): Promise<void> {\r\n  char.corpse_items = [] as types.IItem[];\r\n  const header = reader.ReadString(2); //0x0000 [item list header = 0x4a, 0x4d \"JM\"]\r\n  if (header !== \"JM\") {\r\n    // header is not present in first save after char is created\r\n    if (char.header.level === 1) {\r\n      char.is_dead = 0;\r\n      return;\r\n    }\r\n\r\n    throw new Error(`Corpse header 'JM' not found at position ${reader.offset - 2 * 8}`);\r\n  }\r\n  char.is_dead = reader.ReadUInt16(); //0x0002 [corpse count]\r\n  for (let i = 0; i < char.is_dead; i++) {\r\n    reader.SkipBytes(12); //0x0004 [b4_entered_area, x_pos, y_pos]\r\n    char.corpse_items = char.corpse_items.concat(await readItems(reader, mod, char.header.version, config, char));\r\n  }\r\n}\r\n\r\nexport async function writeCorpseItem(char: types.ID2S, mod: string, version: number, config: types.IConfig): Promise<Uint8Array> {\r\n  const writer = new BitWriter();\r\n  writer.WriteString(\"JM\", 2);\r\n  writer.WriteUInt16(char.is_dead);\r\n  //json struct doesnt support multiple corpses without modifying it\r\n  if (char.is_dead) {\r\n    writer.WriteArray(new Uint8Array(12));\r\n    char.corpse_items = char.corpse_items || [];\r\n    writer.WriteArray(await writeItems(char.corpse_items, mod, version, config));\r\n  }\r\n  return writer.ToArray();\r\n}\r\n\r\nexport async function readItems(\r\n  reader: BitReader,\r\n  mod: string,\r\n  version: number,\r\n  config: types.IConfig,\r\n  char?: types.ID2S,\r\n): Promise<types.IItem[]> {\r\n  const items = [] as types.IItem[];\r\n  const header = reader.ReadString(2); //0x0000 [item list header = 0x4a, 0x4d \"JM\"]\r\n  if (header !== \"JM\") {\r\n    // header is not present in first save after char is created\r\n    if (char?.header.level === 1) {\r\n      return []; // TODO: return starter items based on class\r\n    }\r\n\r\n    throw new Error(`Item list header 'JM' not found at position ${reader.offset - 2 * 8}`);\r\n  }\r\n  const count = reader.ReadUInt16(); //0x0002\r\n\r\n  for (let i = 0; i < count; i++) {\r\n    items.push(await readItem(reader, mod, version, config));\r\n  }\r\n  return items;\r\n}\r\n\r\nexport async function writeItems(items: types.IItem[], mod: string, version: number, config: types.IConfig): Promise<Uint8Array> {\r\n  const writer = new BitWriter();\r\n  writer.WriteString(\"JM\", 2);\r\n  writer.WriteUInt16(items.length);\r\n  for (let i = 0; i < items.length; i++) {\r\n    writer.WriteArray(await writeItem(items[i], mod, version, config));\r\n  }\r\n  return writer.ToArray();\r\n}\r\n\r\nexport async function readItem(reader: BitReader, mod: string, version: number, config: types.IConfig): Promise<types.IItem> {\r\n  if (version <= 0x60) {\r\n    const header = reader.ReadString(2); //0x0000 [item header = 0x4a, 0x4d \"JM\"]\r\n    if (header !== \"JM\") {\r\n      throw new Error(`Item header 'JM' not found at position ${reader.offset - 2 * 8}`);\r\n    }\r\n  }\r\n  const constants = getConstantData(mod, version);\r\n  const item = {} as types.IItem;\r\n  _readSimpleBits(item, reader, version, constants, config);\r\n  if (!item.simple_item) {\r\n    item.id = reader.ReadUInt32(32);\r\n    item.level = reader.ReadUInt8(7);\r\n    item.quality = reader.ReadUInt8(4);\r\n    item.multiple_pictures = reader.ReadBit();\r\n    if (item.multiple_pictures) {\r\n      item.picture_id = reader.ReadUInt8(3);\r\n    }\r\n    item.class_specific = reader.ReadBit();\r\n    if (item.class_specific) {\r\n      item.auto_affix_id = reader.ReadUInt16(11);\r\n    }\r\n    switch (item.quality) {\r\n      case Quality.Low:\r\n        item.low_quality_id = reader.ReadUInt8(3);\r\n        break;\r\n      case Quality.Normal:\r\n        break;\r\n      case Quality.Superior:\r\n        item.file_index = reader.ReadUInt8(3);\r\n        break;\r\n      case Quality.Magic:\r\n        item.magic_prefix = reader.ReadUInt16(11);\r\n        item.magic_suffix = reader.ReadUInt16(11);\r\n        break;\r\n      case Quality.Set:\r\n        item.set_id = reader.ReadUInt16(12);\r\n        item.set_name = constants.set_items[item.set_id] ? constants.set_items[item.set_id].n : null;\r\n        break;\r\n      case Quality.Unique:\r\n        item.unique_id = reader.ReadUInt16(12);\r\n        item.unique_name = constants.unq_items[item.unique_id] ? constants.unq_items[item.unique_id].n : null;\r\n        break;\r\n      case Quality.Rare:\r\n      case Quality.Crafted:\r\n        item.rare_name_id = reader.ReadUInt8(8);\r\n        if (item.rare_name_id) item.rare_name = constants.rare_names[item.rare_name_id] ? constants.rare_names[item.rare_name_id].n : null;\r\n        item.rare_name_id2 = reader.ReadUInt8(8);\r\n        if (item.rare_name_id2)\r\n          item.rare_name2 = constants.rare_names[item.rare_name_id2] ? constants.rare_names[item.rare_name_id2].n : null;\r\n        item.magical_name_ids = [];\r\n        for (let i = 0; i < 6; i++) {\r\n          const prefix = reader.ReadBit();\r\n          if (prefix === 1) {\r\n            item.magical_name_ids[i] = reader.ReadUInt16(11);\r\n          } else {\r\n            item.magical_name_ids[i] = null;\r\n          }\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    if (item.given_runeword) {\r\n      item.runeword_id = reader.ReadUInt16(12);\r\n      //fix delerium on d2gs??? why is this a thing?\r\n      if (item.runeword_id == 2718) {\r\n        item.runeword_id = 48;\r\n      }\r\n      if (constants.runewords[item.runeword_id]) {\r\n        item.runeword_name = constants.runewords[item.runeword_id]!.n!;\r\n      }\r\n      reader.ReadUInt8(4);\r\n    }\r\n\r\n    if (item.personalized) {\r\n      const arr = new Uint8Array(16);\r\n      for (let i = 0; i < arr.length; i++) {\r\n        if (version > 0x61) {\r\n          arr[i] = reader.ReadUInt8(8);\r\n        } else {\r\n          arr[i] = reader.ReadUInt8(7);\r\n        }\r\n        if (arr[i] === 0x00) {\r\n          break;\r\n        }\r\n      }\r\n      item.personalized_name = new BitReader(arr).ReadString(16).trim().replace(/\\0/g, \"\");\r\n    }\r\n\r\n    //tomes\r\n    if (item.type === \"tbk\" || item.type == \"ibk\") {\r\n      reader.ReadUInt8(5);\r\n    }\r\n\r\n    //realm data\r\n    item.timestamp = reader.ReadUInt8(1);\r\n\r\n    if (item.type_id === ItemType.Armor) {\r\n      item.defense_rating = reader.ReadUInt16(constants.magical_properties[31].sB) - constants.magical_properties[31].sA;\r\n    }\r\n    if (item.type_id === ItemType.Armor || item.type_id === ItemType.Weapon) {\r\n      item.max_durability = reader.ReadUInt16(constants.magical_properties[73].sB) - constants.magical_properties[73].sA;\r\n      if (item.max_durability > 0) {\r\n        item.current_durability = reader.ReadUInt16(constants.magical_properties[72].sB) - constants.magical_properties[72].sA;\r\n      }\r\n    }\r\n\r\n    if (constants.stackables[item.type]) {\r\n      item.quantity = reader.ReadUInt16(9);\r\n    }\r\n\r\n    if (item.socketed === 1) {\r\n      item.total_nr_of_sockets = reader.ReadUInt8(4);\r\n    } else {\r\n      item.total_nr_of_sockets = 0;\r\n    }\r\n\r\n    /**\r\n     * 5 bits. any of the 5 bits can be set. if a bit is set that means\r\n     * means +1 to the set_list_count\r\n     */\r\n    let plist_flag = 0;\r\n    if (item.quality === Quality.Set) {\r\n      plist_flag = reader.ReadUInt8(5);\r\n      item.set_list_count = 0;\r\n      item._unknown_data.plist_flag = plist_flag;\r\n    }\r\n\r\n    //magical properties\r\n    let magic_attributes = _readMagicProperties(reader, constants);\r\n    item.magic_attributes = magic_attributes;\r\n\r\n    while (plist_flag > 0) {\r\n      if (plist_flag & 1) {\r\n        item.set_list_count += 1;\r\n        magic_attributes = _readMagicProperties(reader, constants);\r\n        if (item.set_attributes) {\r\n          item.set_attributes.push(magic_attributes);\r\n        } else {\r\n          item.set_attributes = [magic_attributes];\r\n        }\r\n      }\r\n      plist_flag >>>= 1;\r\n    }\r\n\r\n    if (item.given_runeword === 1) {\r\n      magic_attributes = _readMagicProperties(reader, constants);\r\n      if (magic_attributes && magic_attributes.length > 0) {\r\n        item.runeword_attributes = magic_attributes;\r\n      }\r\n    }\r\n  }\r\n  reader.Align();\r\n\r\n  if (item.nr_of_items_in_sockets > 0 && item.simple_item === 0) {\r\n    item.socketed_items = [];\r\n    for (let i = 0; i < item.nr_of_items_in_sockets; i++) {\r\n      item.socketed_items.push(await readItem(reader, mod, version, config));\r\n    }\r\n  }\r\n  //console.log(JSON.stringify(item));\r\n  return item;\r\n}\r\n\r\nexport async function writeItem(item: types.IItem, mod: string, version: number, config: types.IConfig): Promise<Uint8Array> {\r\n  const constants = getConstantData(mod, version);\r\n  if (item._unknown_data === undefined) {\r\n    item._unknown_data = {};\r\n  }\r\n  if (item.categories === undefined) {\r\n    item.categories = _GetItemTXT(item, constants)?.c;\r\n  }\r\n\r\n  const writer = new BitWriter();\r\n  if (version <= 0x60) {\r\n    writer.WriteString(\"JM\", 2);\r\n  }\r\n  _writeSimpleBits(writer, mod, version, item);\r\n  if (!item.simple_item) {\r\n    writer.WriteUInt32(item.id, 32);\r\n    writer.WriteUInt8(item.level, 7);\r\n    writer.WriteUInt8(item.quality, 4);\r\n    writer.WriteUInt8(item.multiple_pictures, 1);\r\n    if (item.multiple_pictures) {\r\n      writer.WriteUInt8(item.picture_id, 3);\r\n    }\r\n    writer.WriteUInt8(item.class_specific, 1);\r\n    if (item.class_specific === 1) {\r\n      writer.WriteUInt16(item.auto_affix_id || 0, 11);\r\n    }\r\n    switch (item.quality) {\r\n      case Quality.Low:\r\n        writer.WriteUInt8(item.low_quality_id, 3);\r\n        break;\r\n      case Quality.Normal:\r\n        break;\r\n      case Quality.Superior:\r\n        writer.WriteUInt8(item.file_index || 0, 3);\r\n        break;\r\n      case Quality.Magic:\r\n        writer.WriteUInt16(item.magic_prefix, 11);\r\n        writer.WriteUInt16(item.magic_suffix, 11);\r\n        break;\r\n      case Quality.Set:\r\n        writer.WriteUInt16(item.set_id, 12);\r\n        break;\r\n      case Quality.Unique:\r\n        writer.WriteUInt16(item.unique_id, 12);\r\n        break;\r\n      case Quality.Rare:\r\n      case Quality.Crafted:\r\n        writer.WriteUInt8(item.rare_name_id !== undefined ? item.rare_name_id : _lookupRareId(item.rare_name, constants), 8);\r\n        writer.WriteUInt8(item.rare_name_id2 !== undefined ? item.rare_name_id2 : _lookupRareId(item.rare_name2, constants), 8);\r\n        for (let i = 0; i < 6; i++) {\r\n          const magical_name_id = item.magical_name_ids !== undefined ? item.magical_name_ids[i] : undefined;\r\n          if (magical_name_id) {\r\n            writer.WriteBit(1);\r\n            writer.WriteUInt16(magical_name_id, 11);\r\n          } else {\r\n            writer.WriteBit(0);\r\n          }\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    if (item.given_runeword) {\r\n      //fix delerium on d2gs??? why is this a thing?\r\n      let runeword_id = item.runeword_id;\r\n      if (runeword_id == 2718) {\r\n        runeword_id = 48;\r\n      }\r\n      writer.WriteUInt16(runeword_id, 12);\r\n      writer.WriteUInt8(5, 4); //always 5?\r\n    }\r\n\r\n    if (item.personalized) {\r\n      const name = item.personalized_name.substring(0, 16);\r\n      for (let i = 0; i < name.length; i++) {\r\n        if (version > 0x61) {\r\n          writer.WriteUInt8(name.charCodeAt(i), 8);\r\n        } else {\r\n          writer.WriteUInt8(name.charCodeAt(i) & 0x7f, 7);\r\n        }\r\n      }\r\n      writer.WriteUInt8(0x00, version > 0x61 ? 8 : 7);\r\n    }\r\n\r\n    if (item.type === \"tbk\") {\r\n      writer.WriteUInt8(0, 5);\r\n    } else if (item.type === \"ibk\") {\r\n      writer.WriteUInt8(1, 5);\r\n    }\r\n\r\n    writer.WriteUInt8(item.timestamp, 1);\r\n\r\n    if (item.type_id === ItemType.Armor || item.type_id === ItemType.Shield) {\r\n      writer.WriteUInt16(item.defense_rating + constants.magical_properties[31].sA, constants.magical_properties[31].sB);\r\n    }\r\n\r\n    if (item.type_id === ItemType.Armor || item.type_id === ItemType.Shield || item.type_id === ItemType.Weapon) {\r\n      writer.WriteUInt16(item.max_durability || 0, constants.magical_properties[73].sB);\r\n      if (item.max_durability > 0) {\r\n        writer.WriteUInt16(item.current_durability, constants.magical_properties[72].sB);\r\n      }\r\n    }\r\n\r\n    if (constants.stackables[item.type]) {\r\n      writer.WriteUInt16(item.quantity, 9);\r\n    }\r\n\r\n    if (item.socketed === 1) {\r\n      writer.WriteUInt8(item.total_nr_of_sockets, 4);\r\n    }\r\n\r\n    if (item.quality === Quality.Set) {\r\n      const set_attribute_count = item.set_attributes != null ? item.set_attributes.length : 0;\r\n      //reduced by -1 removed as this seems to be wrong\r\n      const plist_flag = (1 << set_attribute_count) - 1;\r\n      writer.WriteUInt8(item._unknown_data.plist_flag || plist_flag, 5);\r\n    }\r\n\r\n    _writeMagicProperties(writer, item.magic_attributes, constants);\r\n    if (item.set_attributes && item.set_attributes.length > 0) {\r\n      for (let i = 0; i < item.set_attributes.length; i++) {\r\n        _writeMagicProperties(writer, item.set_attributes[i], constants);\r\n      }\r\n    }\r\n\r\n    if (item.given_runeword === 1) {\r\n      _writeMagicProperties(writer, item.runeword_attributes, constants);\r\n    }\r\n  }\r\n\r\n  writer.Align();\r\n\r\n  if (item.nr_of_items_in_sockets > 0 && item.simple_item === 0) {\r\n    for (let i = 0; i < item.nr_of_items_in_sockets; i++) {\r\n      writer.WriteArray(await writeItem(item.socketed_items[i], mod, version, config));\r\n    }\r\n  }\r\n  return writer.ToArray();\r\n}\r\n\r\nfunction _readSimpleBits(item: types.IItem, reader: BitReader, version: number, constants: types.IConstantData, config: types.IConfig) {\r\n  //init so we do not have npe's\r\n  item._unknown_data = {};\r\n  //1.10-1.14d\r\n  //[flags:32][version:10][mode:3]([invloc:4][x:4][y:4][page:3])([itemcode:32])([sockets:3])\r\n  //1.15\r\n  //[flags:32][version:3][mode:3]([invloc:4][x:4][y:4][page:3])([itemcode:variable])([sockets:3])\r\n  item._unknown_data.b0_3 = reader.ReadBitArray(4);\r\n  item.identified = reader.ReadBit();\r\n  item._unknown_data.b5_10 = reader.ReadBitArray(6);\r\n  item.socketed = reader.ReadBit();\r\n  item._unknown_data.b12 = reader.ReadBitArray(1);\r\n  item.new = reader.ReadBit();\r\n  item._unknown_data.b14_15 = reader.ReadBitArray(2);\r\n  item.is_ear = reader.ReadBit();\r\n  item.starter_item = reader.ReadBit();\r\n  item._unknown_data.b18_20 = reader.ReadBitArray(3);\r\n  item.simple_item = reader.ReadBit();\r\n  item.ethereal = reader.ReadBit();\r\n  item._unknown_data.b23 = reader.ReadBitArray(1);\r\n  item.personalized = reader.ReadBit();\r\n  item._unknown_data.b25 = reader.ReadBitArray(1);\r\n  item.given_runeword = reader.ReadBit();\r\n  item._unknown_data.b27_31 = reader.ReadBitArray(5);\r\n\r\n  if (version <= 0x60) {\r\n    item.version = reader.ReadUInt16(10).toString(10);\r\n  } else if (version >= 0x61) {\r\n    item.version = reader.ReadUInt16(3).toString(2);\r\n  }\r\n  item.location_id = reader.ReadUInt8(3);\r\n  item.equipped_id = reader.ReadUInt8(4);\r\n  item.position_x = reader.ReadUInt8(4);\r\n  item.position_y = reader.ReadUInt8(4);\r\n  item.alt_position_id = reader.ReadUInt8(3);\r\n  if (item.is_ear) {\r\n    const clazz = reader.ReadUInt8(3);\r\n    const level = reader.ReadUInt8(7);\r\n    const arr = new Uint8Array(15);\r\n    for (let i = 0; i < arr.length; i++) {\r\n      arr[i] = reader.ReadUInt8(7);\r\n      if (arr[i] === 0x00) {\r\n        break;\r\n      }\r\n    }\r\n    const name = new BitReader(arr).ReadString(15).trim().replace(/\\0/g, \"\");\r\n    item.ear_attributes = {\r\n      class: clazz,\r\n      level: level,\r\n      name: name,\r\n    } as types.IEarAttributes;\r\n  } else {\r\n    if (version <= 0x60) {\r\n      item.type = reader.ReadString(4);\r\n    } else if (version >= 0x61) {\r\n      item.type = \"\";\r\n      //props to d07riv\r\n      //https://github.com/d07RiV/d07riv.github.io/blob/master/d2r.html#L11-L20\r\n      for (let i = 0; i < 4; i++) {\r\n        let node = HUFFMAN as any;\r\n        let bits = \"\";\r\n        do {\r\n          const bit = reader.ReadBit();\r\n          bits += bit;\r\n          node = node[bit];\r\n          if (node === undefined) {\r\n            console.log(\"Huffman value starting by \" + bits.split(\"\").reverse().join(\"\") + \"... is undefined.\");\r\n          }\r\n        } while (Array.isArray(node));\r\n        item.type += node;\r\n      }\r\n    }\r\n    item.type = item.type.trim().replace(/\\0/g, \"\");\r\n    let details = _GetItemTXT(item, constants);\r\n    item.categories = details?.c;\r\n    if (item?.categories.includes(\"Any Armor\")) {\r\n      item.type_id = ItemType.Armor;\r\n    } else if (item?.categories.includes(\"Weapon\")) {\r\n      item.type_id = ItemType.Weapon;\r\n      details = constants.weapon_items[item.type];\r\n    } else {\r\n      item.type_id = ItemType.Other;\r\n    }\r\n\r\n    let bits = item.simple_item ? 1 : 3;\r\n    if (item.categories?.includes(\"Quest\")) {\r\n      item.quest_difficulty = reader.ReadUInt16(constants.magical_properties[356].sB) - constants.magical_properties[356].sA;\r\n      bits = 1;\r\n    }\r\n    item.nr_of_items_in_sockets = reader.ReadUInt8(bits);\r\n  }\r\n}\r\n\r\nfunction _lookupRareId(name: string, constants: types.IConstantData): number {\r\n  //some inconsistencies with txt data and nokka. so have to hack it with startsWith\r\n  return constants.rare_names.findIndex(\r\n    (k) => k && k.n && (k.n.toLowerCase().startsWith(name.toLowerCase()) || name.toLowerCase().startsWith(k.n.toLowerCase())),\r\n  );\r\n}\r\n\r\nfunction _writeSimpleBits(writer: BitWriter, mod: string, version: number, item: types.IItem) {\r\n  const constants = getConstantData(mod, version);\r\n  writer.WriteBits(item._unknown_data.b0_3 || new Uint8Array(4), 4);\r\n  writer.WriteBit(item.identified);\r\n  writer.WriteBits(item._unknown_data.b5_10 || new Uint8Array(6), 6);\r\n  writer.WriteBit(item.socketed);\r\n  writer.WriteBits(item._unknown_data.b12 || new Uint8Array(1), 1);\r\n  writer.WriteBit(item.new);\r\n  writer.WriteBits(item._unknown_data.b14_15 || new Uint8Array(2), 2);\r\n  writer.WriteBit(item.is_ear);\r\n  writer.WriteBit(item.starter_item);\r\n  writer.WriteBits(item._unknown_data.b18_20 || new Uint8Array(3), 3);\r\n  writer.WriteBit(item.simple_item);\r\n  writer.WriteBit(item.ethereal);\r\n  writer.WriteBits(item._unknown_data.b23 || new Uint8Array([1]), 1); //always 1? IFLAG_JUSTSAVED\r\n  writer.WriteBit(item.personalized);\r\n  writer.WriteBits(item._unknown_data.b25 || new Uint8Array(1), 1); //IFLAG_LOWQUALITY\r\n  writer.WriteBit(item.given_runeword);\r\n  writer.WriteBits(item._unknown_data.b27_31 || new Uint8Array(5), 5);\r\n\r\n  const itemVersion = item.version != null ? item.version : \"101\";\r\n  if (version <= 0x60) {\r\n    // 0 = pre-1.08; 1 = 1.08/1.09 normal; 2 = 1.10 normal; 100 = 1.08/1.09 expansion; 101 = 1.10 expansion\r\n    writer.WriteUInt16(parseInt(itemVersion, 10), 10);\r\n  } else if (version >= 0x61) {\r\n    writer.WriteUInt16(parseInt(itemVersion, 2), 3);\r\n  }\r\n  writer.WriteUInt8(item.location_id, 3);\r\n  writer.WriteUInt8(item.equipped_id, 4);\r\n  writer.WriteUInt8(item.position_x, 4);\r\n  writer.WriteUInt8(item.position_y, 4);\r\n  writer.WriteUInt8(item.alt_position_id, 3);\r\n  if (item.is_ear) {\r\n    writer.WriteUInt8(item.ear_attributes.class, 3);\r\n    writer.WriteUInt8(item.ear_attributes.level, 7);\r\n    const name = item.ear_attributes.name.substring(0, 15);\r\n    for (let i = 0; i < name.length; i++) {\r\n      writer.WriteUInt8(name.charCodeAt(i) & 0x7f, 7);\r\n    }\r\n    writer.WriteUInt8(0x00, 7);\r\n  } else {\r\n    const t = item.type.padEnd(4, \" \");\r\n    if (version <= 0x60) {\r\n      writer.WriteString(t, 4);\r\n    } else {\r\n      for (const c of t) {\r\n        const n = HUFFMAN_LOOKUP[c];\r\n        writer.WriteUInt32(n.v, n.l); // Change from Uint16 to Uint32 because in ReMoDDeD caps letters are on 17bits.\r\n      }\r\n    }\r\n\r\n    let bits = item.simple_item ? 1 : 3;\r\n    if (item.categories?.includes(\"Quest\")) {\r\n      const difficulty = item.quest_difficulty || 0;\r\n      writer.WriteUInt16(difficulty + constants.magical_properties[356].sA, constants.magical_properties[356].sB);\r\n      bits = 1;\r\n    }\r\n    writer.WriteUInt8(item.nr_of_items_in_sockets, bits);\r\n  }\r\n}\r\n\r\nexport function _readMagicProperties(reader: BitReader, constants: types.IConstantData): types.IMagicProperty[] {\r\n  let id = reader.ReadUInt16(9);\r\n  const magic_attributes = [];\r\n  while (id != 0x1ff) {\r\n    const values = [];\r\n    if (!constants.magical_properties[id]) {\r\n      throw new Error(`Invalid magic property Id: ${id} at position ${reader.offset - 9}`);\r\n    }\r\n    const num_of_properties = constants.magical_properties[id].np || 1;\r\n    for (let i = 0; i < num_of_properties; i++) {\r\n      const prop = constants.magical_properties[id + i];\r\n      if (prop == null) {\r\n        throw new Error(`Cannot find Magical Property for id: ${id} at position ${reader.offset}`);\r\n      }\r\n      if (prop.sP) {\r\n        let param = reader.ReadUInt32(prop.sP);\r\n        switch (prop.dF) {\r\n          case 14: //+skill to skilltab\r\n            values.push(param & 0x7);\r\n            param = (param >> 3) & 0x1fff;\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        //encode\r\n        switch (prop.e) {\r\n          case 1:\r\n            //throw new Error(`Unimplemented encoding: ${prop.encode}`);\r\n            break;\r\n          case 2: //chance to cast: 10bits skill id - 6bits skill level\r\n          case 3: //charges\r\n            values.push(param & 0x3f); //skill level\r\n            param = (param >> 6) & 0x3ff; //skll id\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        values.push(param);\r\n      }\r\n      if (!prop.sB) {\r\n        throw new Error(`Save Bits is undefined for stat: ${id}:${prop.s} at position ${reader.offset}`);\r\n      }\r\n      let v = reader.ReadUInt32(prop.sB);\r\n      if (prop.sA) {\r\n        v -= prop.sA;\r\n      }\r\n      switch (prop.e) {\r\n        case 3:\r\n          values.push(v & 0xff); // current charges\r\n          values.push((v >> 8) & 0xff); //max charges\r\n          break;\r\n        default:\r\n          values.push(v);\r\n          break;\r\n      }\r\n    }\r\n    magic_attributes.push({\r\n      id: id,\r\n      values: values,\r\n      name: constants.magical_properties[id].s,\r\n    } as types.IMagicProperty);\r\n    id = reader.ReadUInt16(9);\r\n  }\r\n  return magic_attributes;\r\n}\r\n\r\nexport function _writeMagicProperties(writer: BitWriter, properties: types.IMagicProperty[], constants: types.IConstantData): void {\r\n  if (properties) {\r\n    for (let i = 0; i < properties.length; i++) {\r\n      const property = properties[i];\r\n      let valueIdx = 0;\r\n      writer.WriteUInt16(property.id, 9);\r\n      const num_of_properties = constants.magical_properties[property!.id].np || 1;\r\n      for (let j = 0; j < num_of_properties; j++) {\r\n        const prop = constants.magical_properties[property!.id + j];\r\n        if (prop == null) {\r\n          throw new Error(`Cannot find Magical Property for id: ${property.id}`);\r\n        }\r\n        if (prop.sP) {\r\n          let param = property.values[valueIdx++]!;\r\n          switch (prop.dF) {\r\n            case 14: //+skill to skilltab\r\n              param |= (property.values[valueIdx++]! & 0x1fff) << 3;\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n          //encode\r\n          switch (prop.e) {\r\n            case 1:\r\n              //throw new Error(`Unimplemented encoding: ${prop.encode}`);\r\n              break;\r\n            case 2: //chance to cast\r\n            case 3: //charges\r\n              param |= (property.values[valueIdx++]! & 0x3ff) << 6;\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n          writer.WriteUInt32(param, prop.sP);\r\n        }\r\n        let v = property.values[valueIdx++]!;\r\n        if (prop.sA) {\r\n          v += prop.sA;\r\n        }\r\n        switch (prop.e) {\r\n          case 3:\r\n            v |= (property.values[valueIdx++]! & 0xff) << 8;\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        if (!prop.sB) {\r\n          throw new Error(`Save Bits is undefined for stat: ${property.id}:${prop.s}`);\r\n        }\r\n        writer.WriteUInt32(v, prop.sB);\r\n      }\r\n    }\r\n  }\r\n  writer.WriteUInt16(0x1ff, 9);\r\n}\r\n\r\nfunction _GetItemTXT(item: types.IItem, constants: types.IConstantData): any {\r\n  if (constants.armor_items[item.type]) {\r\n    return constants.armor_items[item.type];\r\n  } else if (constants.weapon_items[item.type]) {\r\n    return constants.weapon_items[item.type];\r\n  } else if (constants.other_items[item.type]) {\r\n    return constants.other_items[item.type];\r\n  }\r\n}\r\n","import * as types from \"./types\";\r\nimport { BitReader } from \"../binary/bitreader\";\r\nimport { BitWriter } from \"../binary/bitwriter\";\r\nimport { getConstantData } from \"./constants\";\r\n\r\nexport function readSkills(char: types.ID2S, reader: BitReader, mod: string): void {\r\n  const constants = getConstantData(mod, char.header.version);\r\n  char.skills = [] as types.ISkill[];\r\n  const offset = SkillOffset[<string>char.header.class];\r\n  const header = reader.ReadString(2); //0x0000 [skills header = 0x69, 0x66 \"if\"]\r\n  if (header !== \"if\") {\r\n    // header is not present in first save after char is created\r\n    if (char.header.level === 1) {\r\n      return; // TODO: return starter skills based on class\r\n    }\r\n\r\n    throw new Error(`Skills header 'if' not found at position ${reader.offset - 2 * 8}`);\r\n  }\r\n  for (let i = 0; i < 30; i++) {\r\n    const id = offset + i;\r\n    char.skills.push({\r\n      id: id,\r\n      points: reader.ReadUInt8(),\r\n      name: constants.skills[id].s,\r\n    } as types.ISkill);\r\n  }\r\n}\r\n\r\nexport async function writeSkills(char: types.ID2S): Promise<Uint8Array> {\r\n  const writer = new BitWriter();\r\n  writer.WriteString(\"if\", 2); //0x0000 [skills header = 0x69, 0x66 \"if\"]\r\n  //probably array length checking/sorting of skills by id...\r\n  for (let i = 0; i < 30; i++) {\r\n    writer.WriteUInt8(char.skills[i].points);\r\n  }\r\n  return writer.ToArray();\r\n}\r\n\r\ninterface ISkillOffset {\r\n  [key: string]: number;\r\n}\r\n\r\nconst SkillOffset: ISkillOffset = {\r\n  Amazon: 6,\r\n  Sorceress: 36,\r\n  Necromancer: 66,\r\n  Paladin: 96,\r\n  Barbarian: 126,\r\n  Druid: 221,\r\n  Assassin: 251,\r\n};\r\n","//todo define types for these\r\nexport interface IConfig {\r\n  extendedStash?: boolean;\r\n  sortProperties?: boolean;\r\n}\r\n\r\nexport interface IConstantData {\r\n  classes: any[];\r\n  skills: any[];\r\n  magic_prefixes: any[];\r\n  magic_suffixes: any[];\r\n  rare_names: any[];\r\n  armor_items: any;\r\n  weapon_items: any;\r\n  other_items: any;\r\n  stackables: any;\r\n  properties: any;\r\n  magical_properties: any[];\r\n  runewords: any[];\r\n  set_items: any[];\r\n  unq_items: any[];\r\n}\r\n\r\nexport interface ID2S {\r\n  header: IHeader;\r\n  attributes: IAttributes;\r\n  item_bonuses: IMagicProperty[];\r\n  skills: ISkill[]; //Skill\r\n  items: IItem[]; //Item\r\n  corpse_items: IItem[];\r\n  merc_items: IItem[];\r\n  golem_item: IItem;\r\n  is_dead: number;\r\n}\r\n\r\nexport interface IAttributes {\r\n  [key: string]: number;\r\n}\r\n\r\nexport interface IMenuAppearance {\r\n  graphic: number;\r\n  tint: number;\r\n}\r\nexport interface ICharMenuAppearance {\r\n  //composite.txt\r\n  head: IMenuAppearance;\r\n  torso: IMenuAppearance;\r\n  legs: IMenuAppearance;\r\n  right_arm: IMenuAppearance;\r\n  left_arm: IMenuAppearance;\r\n  right_hand: IMenuAppearance;\r\n  left_hand: IMenuAppearance;\r\n  shield: IMenuAppearance;\r\n  special1: IMenuAppearance; //right shoulder\r\n  special2: IMenuAppearance; //left shoulder\r\n  special3: IMenuAppearance;\r\n  special4: IMenuAppearance;\r\n  special5: IMenuAppearance;\r\n  special6: IMenuAppearance;\r\n  special7: IMenuAppearance;\r\n  special8: IMenuAppearance;\r\n}\r\n\r\nexport interface IDifficulty {\r\n  Normal: number;\r\n  Nightmare: number;\r\n  Hell: number;\r\n}\r\n\r\nexport interface INPC {\r\n  intro: boolean;\r\n  congrats: boolean;\r\n}\r\n\r\nexport interface INPCS {\r\n  warriv_act_ii: INPC;\r\n  charsi: INPC;\r\n  warriv_act_i: INPC;\r\n  kashya: INPC;\r\n  akara: INPC;\r\n  gheed: INPC;\r\n  greiz: INPC;\r\n  jerhyn: INPC;\r\n  meshif_act_ii: INPC;\r\n  geglash: INPC;\r\n  lysnader: INPC;\r\n  fara: INPC;\r\n  drogan: INPC;\r\n  alkor: INPC;\r\n  hratli: INPC;\r\n  ashera: INPC;\r\n  cain_act_iii: INPC;\r\n  elzix: INPC;\r\n  malah: INPC;\r\n  anya: INPC;\r\n  natalya: INPC;\r\n  meshif_act_iii: INPC;\r\n  ormus: INPC;\r\n  cain_act_v: INPC;\r\n  qualkehk: INPC;\r\n  nihlathak: INPC;\r\n}\r\n\r\nexport interface IQuest {\r\n  b15_completed_before: boolean;\r\n  b14_completed_now: boolean;\r\n  b13_done_recently: boolean; //13\r\n  b12_closed: boolean; //12\r\n  b11_custom7: boolean;\r\n  b10_custom6: boolean;\r\n  b9_custom5: boolean;\r\n  b8_custom4: boolean;\r\n  b7_custom3: boolean; //7\r\n  b6_custom2: boolean;\r\n  b5_custom1: boolean;\r\n  b4_entered_area: boolean;\r\n  b3_left_town: boolean;\r\n  b2_is_received: boolean; //2\r\n  b0_is_completed: boolean; //1\r\n  b1_is_requirement_completed: boolean; //0\r\n}\r\n\r\nexport interface IActIQuests {\r\n  introduced: boolean;\r\n  den_of_evil: IQuest;\r\n  sisters_burial_grounds: IQuest;\r\n  tools_of_the_trade: IQuest;\r\n  the_search_for_cain: IQuest;\r\n  the_forgotten_tower: IQuest;\r\n  sisters_to_the_slaughter: IQuest;\r\n  completed: boolean;\r\n}\r\n\r\nexport interface IActIWaypoints {\r\n  rogue_encampement: boolean;\r\n  cold_plains: boolean;\r\n  stony_field: boolean;\r\n  dark_woods: boolean;\r\n  black_marsh: boolean;\r\n  outer_cloister: boolean;\r\n  jail_lvl_1: boolean;\r\n  inner_cloister: boolean;\r\n  catacombs_lvl_2: boolean;\r\n}\r\n\r\nexport interface IActIIQuests {\r\n  introduced: boolean;\r\n  radaments_lair: IQuest;\r\n  the_horadric_staff: IQuest;\r\n  tainted_sun: IQuest;\r\n  arcane_sanctuary: IQuest;\r\n  the_summoner: IQuest;\r\n  the_seven_tombs: IQuest;\r\n  completed: boolean;\r\n}\r\n\r\nexport interface IActIIWaypoints {\r\n  lut_gholein: boolean;\r\n  sewers_lvl_2: boolean;\r\n  dry_hills: boolean;\r\n  halls_of_the_dead_lvl_2: boolean;\r\n  far_oasis: boolean;\r\n  lost_city: boolean;\r\n  palace_cellar_lvl_1: boolean;\r\n  arcane_sanctuary: boolean;\r\n  canyon_of_the_magi: boolean;\r\n}\r\n\r\nexport interface IActIIIQuests {\r\n  introduced: boolean;\r\n  lam_esens_tome: IQuest;\r\n  khalims_will: IQuest;\r\n  blade_of_the_old_religion: IQuest;\r\n  the_golden_bird: IQuest;\r\n  the_blackened_temple: IQuest;\r\n  the_guardian: IQuest;\r\n  completed: boolean;\r\n}\r\n\r\nexport interface IActIIIWaypoints {\r\n  kurast_docks: boolean;\r\n  spider_forest: boolean;\r\n  great_marsh: boolean;\r\n  flayer_jungle: boolean;\r\n  lower_kurast: boolean;\r\n  kurast_bazaar: boolean;\r\n  upper_kurast: boolean;\r\n  travincal: boolean;\r\n  durance_of_hate_lvl_2: boolean;\r\n}\r\n\r\nexport interface IActIVQuests {\r\n  introduced: boolean;\r\n  the_fallen_angel: IQuest;\r\n  terrors_end: IQuest;\r\n  hellforge: IQuest;\r\n  completed: boolean;\r\n}\r\n\r\nexport interface IActIVWaypoints {\r\n  the_pandemonium_fortress: boolean;\r\n  city_of_the_damned: boolean;\r\n  river_of_flame: boolean;\r\n}\r\n\r\nexport interface IActVQuests {\r\n  introduced: boolean;\r\n  siege_on_harrogath: IQuest;\r\n  rescue_on_mount_arreat: IQuest;\r\n  prison_of_ice: IQuest;\r\n  betrayal_of_harrogath: IQuest;\r\n  rite_of_passage: IQuest;\r\n  eve_of_destruction: IQuest;\r\n  completed: boolean;\r\n}\r\n\r\nexport interface IActVWaypoints {\r\n  harrogath: boolean;\r\n  frigid_highlands: boolean;\r\n  arreat_plateau: boolean;\r\n  crystalline_passage: boolean;\r\n  halls_of_pain: boolean;\r\n  glacial_trail: boolean;\r\n  frozen_tundra: boolean;\r\n  the_ancients_way: boolean;\r\n  worldstone_keep_lvl_2: boolean;\r\n}\r\n\r\nexport interface IQuests {\r\n  act_i: IActIQuests;\r\n  act_ii: IActIIQuests;\r\n  act_iii: IActIIIQuests;\r\n  act_iv: IActIVQuests;\r\n  act_v: IActVQuests;\r\n}\r\n\r\nexport interface IWaypoints {\r\n  act_i: IActIWaypoints;\r\n  act_ii: IActIIWaypoints;\r\n  act_iii: IActIIIWaypoints;\r\n  act_iv: IActIVWaypoints;\r\n  act_v: IActVWaypoints;\r\n}\r\n\r\nexport interface INPCData {\r\n  normal: INPCS;\r\n  nm: INPCS;\r\n  hell: INPCS;\r\n}\r\n\r\nexport interface IWaypointData {\r\n  normal: IWaypoints;\r\n  nm: IWaypoints;\r\n  hell: IWaypoints;\r\n}\r\n\r\nexport interface IHeader {\r\n  identifier: string;\r\n  checksum: string;\r\n  name: string;\r\n  status: IStatus;\r\n  class: string;\r\n  created: number;\r\n  last_played: number;\r\n  menu_appearance: ICharMenuAppearance;\r\n  left_skill: string;\r\n  right_skill: string;\r\n  left_swap_skill: string;\r\n  right_swap_skill: string;\r\n  merc_id: string;\r\n  assigned_skills: string[];\r\n  quests_normal: IQuests;\r\n  quests_nm: IQuests;\r\n  quests_hell: IQuests;\r\n  waypoints: IWaypointData;\r\n  npcs: INPCData;\r\n  version: number;\r\n  filesize: number;\r\n  active_arms: number;\r\n  progression: number;\r\n  level: number;\r\n  difficulty: IDifficulty;\r\n  map_id: number;\r\n  dead_merc: number;\r\n  merc_name_id: number;\r\n  merc_type: number;\r\n  merc_experience: number;\r\n}\r\n\r\nexport interface IStatus {\r\n  expansion: boolean;\r\n  died: boolean;\r\n  hardcore: boolean;\r\n  ladder: boolean;\r\n}\r\n\r\nexport interface ISkill {\r\n  id: number;\r\n  points: number;\r\n  name: string;\r\n}\r\n\r\nexport interface IItem {\r\n  identified: number;\r\n  socketed: number; // 1: has sockets\r\n  new: number;\r\n  is_ear: number;\r\n  starter_item: number;\r\n  simple_item: number;\r\n  ethereal: number; //1: ethereal\r\n  personalized: number;\r\n  personalized_name: string;\r\n  given_runeword: number; // 1: is a runeword\r\n  version: string;\r\n  location_id: number; // 0: stored, 1: equipped, 2: belt, 4: cursor, 6: socketed\r\n  equipped_id: number; // 1: helm, 2: amulet, 3: armor, 4: right-hand, 5: left-hand, 6: right ring, 7: left ring, 8: belt, 9: boots, 10: gloves, 11: right-hand switch, 12: left-hand switch\r\n  position_x: number; // 0-indexed column\r\n  position_y: number; // 0-indexed row\r\n  alt_position_id: number; // 1: inventory, 4: cube, 5: stash\r\n  type: string; // 4 characters code\r\n  type_id: number; // 1: armor, 2: weapon, 3: shield, 4: other\r\n  type_name: string; // Type en-US name\r\n  quest_difficulty: number;\r\n  nr_of_items_in_sockets: number; // Number of socketed items\r\n  id: number; // Uint32 identifier\r\n  level: number;\r\n  quality: number; // 1: low, 2: normal, 3: superior, 4: magic, 5: set, 6: rare, 7: unique, 8: crafted\r\n  multiple_pictures: number; // 1: has multiple skins\r\n  picture_id: number; // current skin index\r\n  class_specific: number;\r\n  low_quality_id: number;\r\n  timestamp: number;\r\n  ear_attributes: IEarAttributes;\r\n  defense_rating: number;\r\n  max_durability: number;\r\n  current_durability: number;\r\n  total_nr_of_sockets: number;\r\n  quantity: number;\r\n  magic_prefix: number;\r\n  magic_suffix: number;\r\n  runeword_id: number;\r\n  runeword_name: string;\r\n  runeword_attributes: IMagicProperty[];\r\n  set_id: number;\r\n  set_name: string;\r\n  set_list_count: number;\r\n  set_attributes: IMagicProperty[][];\r\n  set_attributes_num_req: number;\r\n  set_attributes_ids_req: number;\r\n  rare_name: string;\r\n  rare_name2: string;\r\n  magical_name_ids: number[] | null[];\r\n  unique_id: number;\r\n  unique_name: string;\r\n  magic_attributes: IMagicProperty[];\r\n  combined_magic_attributes: IMagicProperty[];\r\n  socketed_items: IItem[];\r\n  base_damage: IWeaponDamage;\r\n  reqstr: number;\r\n  reqdex: number;\r\n  inv_width: number;\r\n  inv_height: number;\r\n  inv_file: string;\r\n  hd_inv_file: string;\r\n  inv_transform: number;\r\n  transform_color: string;\r\n  item_quality: EItemQuality;\r\n  categories: string[];\r\n  file_index: number;\r\n  auto_affix_id: number;\r\n  _unknown_data: {\r\n    b0_3?: Uint8Array;\r\n    b5_10?: Uint8Array;\r\n    b12?: Uint8Array;\r\n    b14_15?: Uint8Array;\r\n    b18_20?: Uint8Array;\r\n    b23?: Uint8Array;\r\n    b25?: Uint8Array;\r\n    b27_31?: Uint8Array;\r\n    plist_flag?: number;\r\n  };\r\n  rare_name_id: number;\r\n  rare_name_id2: number;\r\n  displayed_magic_attributes: IMagicProperty[];\r\n  displayed_runeword_attributes: IMagicProperty[];\r\n  displayed_combined_magic_attributes: IMagicProperty[];\r\n}\r\n\r\nexport interface IWeaponDamage {\r\n  mindam: number;\r\n  maxdam: number;\r\n  twohandmindam: number;\r\n  twohandmaxdam: number;\r\n}\r\n\r\nexport interface IEarAttributes {\r\n  class: number;\r\n  level: number;\r\n  name: string;\r\n}\r\n\r\nexport interface IMagicProperty {\r\n  id: number;\r\n  name: string;\r\n  values: number[];\r\n  description: string;\r\n  visible: boolean;\r\n  op_value: number;\r\n  op_stats: string[];\r\n}\r\n\r\nexport enum EStashType {\r\n  shared,\r\n  private,\r\n}\r\n\r\nexport interface IStash {\r\n  version: string;\r\n  type: EStashType;\r\n  pageCount: number;\r\n  sharedGold: number;\r\n  hardcore: boolean;\r\n  pages: IStashPage[];\r\n}\r\n\r\nexport interface IStashPage {\r\n  name: string;\r\n  type: number;\r\n  items: IItem[];\r\n}\r\n\r\nexport enum EItemQuality {\r\n  normal,\r\n  exceptional,\r\n  elite,\r\n}\r\n","// Character name must be 2-15 characters, with at most once \"-\" or \"_\" character not placed at first or last.\r\nexport const nameRegex = /^[A-Za-z](?=.{0,14}$)[A-Za-z]*[A-Za-z\\-_][A-Za-z]+$/;\r\n","import * as types from \"../types\";\r\nimport { BitReader } from \"../../binary/bitreader\";\r\nimport { BitWriter } from \"../../binary/bitwriter\";\r\n\r\nconst difficulties = [\"normal\", \"nm\", \"hell\"];\r\n\r\nexport function readHeader(char: types.ID2S, reader: BitReader, constants: types.IConstantData) {\r\n  char.header.filesize = reader.ReadUInt32(); //0x0008\r\n  char.header.checksum = reader.ReadUInt32().toString(16).padStart(8, \"0\"); //0x000c\r\n  reader.SkipBytes(4); //0x0010\r\n  if (char.header.version > 0x61) {\r\n    reader.SeekByte(267);\r\n  }\r\n  char.header.name = reader.ReadString(16).replace(/\\0/g, \"\"); //0x0014\r\n  if (char.header.version > 0x61) {\r\n    reader.SeekByte(36);\r\n  }\r\n  char.header.status = _readStatus(reader.ReadUInt8()); //0x0024\r\n  char.header.progression = reader.ReadUInt8(); //0x0025\r\n  char.header.active_arms = reader.ReadUInt16(); //0x0026 [unk = 0x0, 0x0]\r\n  char.header.class = constants.classes[reader.ReadUInt8()]!.n; //0x0028\r\n  reader.SkipBytes(2); //0x0029 [unk = 0x10, 0x1E]\r\n  char.header.level = reader.ReadUInt8(); //0x002b\r\n  char.header.created = reader.ReadUInt32(); //0x002c\r\n  char.header.last_played = reader.ReadUInt32(); //0x0030\r\n  reader.SkipBytes(4); //0x0034 [unk = 0xff, 0xff, 0xff, 0xff]\r\n  char.header.assigned_skills = _readAssignedSkills(reader.ReadArray(64), constants); //0x0038\r\n  char.header.left_skill = constants.skills[reader.ReadUInt32()]?.s; //0x0078\r\n  char.header.right_skill = constants.skills[reader.ReadUInt32()]?.s; //0x007c\r\n  char.header.left_swap_skill = constants.skills[reader.ReadUInt32()]?.s; //0x0080\r\n  char.header.right_swap_skill = constants.skills[reader.ReadUInt32()]?.s; //0x0084\r\n  char.header.menu_appearance = _readCharMenuAppearance(reader.ReadArray(32), constants); //0x0088 [char menu appearance]\r\n  char.header.difficulty = _readDifficulty(reader.ReadArray(3)); //0x00a8\r\n  char.header.map_id = reader.ReadUInt32(); //0x00ab\r\n  reader.SkipBytes(2); //0x00af [unk = 0x0, 0x0]\r\n  char.header.dead_merc = reader.ReadUInt16(); //0x00b1\r\n  char.header.merc_id = reader.ReadUInt32().toString(16); //0x00b3\r\n  char.header.merc_name_id = reader.ReadUInt16(); //0x00b7\r\n  char.header.merc_type = reader.ReadUInt16(); //0x00b9\r\n  char.header.merc_experience = reader.ReadUInt32(); //0x00bb\r\n  reader.SkipBytes(144); //0x00bf [unk]\r\n  reader.SkipBytes(4); //0x014f [quests header identifier = 0x57, 0x6f, 0x6f, 0x21 \"Woo!\"]\r\n  reader.SkipBytes(4); //0x0153 [version = 0x6, 0x0, 0x0, 0x0]\r\n  reader.SkipBytes(2); //0x0153 [quests header length = 0x2a, 0x1]\r\n  char.header.quests_normal = _readQuests(reader.ReadArray(96)); //0x0159\r\n  char.header.quests_nm = _readQuests(reader.ReadArray(96)); //0x01b9\r\n  char.header.quests_hell = _readQuests(reader.ReadArray(96)); //0x0219\r\n  reader.SkipBytes(2); //0x0279 [waypoint header identifier = 0x57, 0x53 \"WS\"]\r\n  reader.SkipBytes(4); //0x027b [waypoint header version = 0x1, 0x0, 0x0, 0x0]\r\n  reader.SkipBytes(2); //0x027f [waypoint header length = 0x50, 0x0]\r\n  char.header.waypoints = _readWaypointData(reader.ReadArray(0x48)); //0x0281\r\n  reader.SkipBytes(2); //0x02c9 [npc header identifier  = 0x01, 0x77 \".w\"]\r\n  reader.SkipBytes(2); //0x02ca [npc header length = 0x34]\r\n  char.header.npcs = _readNPCData(reader.ReadArray(0x30)); //0x02cc\r\n}\r\n\r\nexport function writeHeader(char: types.ID2S, writer: BitWriter, constants: types.IConstantData) {\r\n  writer\r\n    .WriteUInt32(0x0) //0x0008 (filesize. needs to be writen after all data)\r\n    .WriteUInt32(0x0); //0x000c (checksum. needs to be calculated after all data writer)\r\n\r\n  if (char.header.version > 0x61) {\r\n    writer.WriteArray(new Uint8Array(Array(20).fill(0))); // 0x0010\r\n  } else {\r\n    writer\r\n      .WriteArray(new Uint8Array([0x00, 0x00, 0x00, 0x00])) //0x0010\r\n      .WriteString(char.header.name, 16); //0x0014\r\n  }\r\n\r\n  writer\r\n    .WriteArray(_writeStatus(char.header.status)) //0x0024\r\n    .WriteUInt8(char.header.progression) //0x0025\r\n    .WriteUInt16(char.header.active_arms) //0x0026\r\n    .WriteUInt8(_classId(char.header.class, constants)) //0x0028\r\n    .WriteArray(new Uint8Array([0x10, 0x1e])) //0x0029\r\n    .WriteUInt8(char.header.level) //0x002b\r\n    .WriteArray(new Uint8Array([0x00, 0x00, 0x00, 0x00])) //0x002c\r\n    .WriteUInt32(char.header.last_played) //0x0030\r\n    .WriteArray(new Uint8Array([0xff, 0xff, 0xff, 0xff])) //0x0034\r\n    .WriteArray(_writeAssignedSkills(char.header.assigned_skills, constants)) //0x0038\r\n    .WriteUInt32(_skillId(char.header.left_skill, constants)) //0x0078\r\n    .WriteUInt32(_skillId(char.header.right_skill, constants)) //0x007c\r\n    .WriteUInt32(_skillId(char.header.left_swap_skill, constants)) //0x0080\r\n    .WriteUInt32(_skillId(char.header.right_swap_skill, constants)) //0x0084\r\n    .WriteArray(_writeCharMenuAppearance(char.header.menu_appearance, constants)) //0x0088 [char menu appearance]\r\n    .WriteArray(_writeDifficulty(char.header.difficulty)) //0x00a8\r\n    .WriteUInt32(char.header.map_id) //0x00ab\r\n    .WriteArray(new Uint8Array([0x00, 0x00])) //0x00af [unk = 0x0, 0x0]\r\n    .WriteUInt16(char.header.dead_merc) //0x00b1\r\n    .WriteUInt32(parseInt(char.header.merc_id, 16)) //0x00b3\r\n    .WriteUInt16(char.header.merc_name_id) //0x00b7\r\n    .WriteUInt16(char.header.merc_type) //0x00b9\r\n    .WriteUInt32(char.header.merc_experience); //0x00bb\r\n\r\n  if (char.header.version > 0x61) {\r\n    writer\r\n      .WriteArray(new Uint8Array(76)) //0x00bf [unk]\r\n      .WriteString(char.header.name, 16) //0x010b\r\n      .WriteArray(new Uint8Array(52)); //0x011b [unk]\r\n  } else {\r\n    writer\r\n      .WriteArray(new Uint8Array(140)) //0x00bf [unk]\r\n      .WriteUInt32(0x1); //0x014b [unk = 0x1, 0x0, 0x0, 0x0]\r\n  }\r\n\r\n  writer\r\n    .WriteString(\"Woo!\", 4) //0x014f [quests = 0x57, 0x6f, 0x6f, 0x21 \"Woo!\"]\r\n    .WriteArray(new Uint8Array([0x06, 0x00, 0x00, 0x00, 0x2a, 0x01])) //0x0153 [unk = 0x6, 0x0, 0x0, 0x0, 0x2a, 0x1]\r\n    .WriteArray(_writeQuests(char.header.quests_normal)) //0x0159\r\n    .WriteArray(_writeQuests(char.header.quests_nm)) //0x01b9\r\n    .WriteArray(_writeQuests(char.header.quests_hell)) //0x0219\r\n    .WriteString(\"WS\", 2) //0x0279 [waypoint data = 0x57, 0x53 \"WS\"]\r\n    .WriteArray(new Uint8Array([0x01, 0x00, 0x00, 0x00, 0x50, 0x00])) //0x027b [unk = 0x1, 0x0, 0x0, 0x0, 0x50, 0x0]\r\n    .WriteArray(_writeWaypointData(char.header.waypoints)) //0x0281\r\n    .WriteArray(new Uint8Array([0x01, 0x77])) //0x02c9 [npc header = 0x01, 0x77 \".w\"]\r\n    .WriteUInt16(0x34) //0x02ca [npc struct length]\r\n    .WriteArray(_writeNPCData(char.header.npcs)); //0x02cc [npc introduction data... unk]\r\n}\r\n\r\nfunction _classId(name: string, constants: types.IConstantData): number {\r\n  if (!name) return -1;\r\n  return constants.classes.findIndex((c) => c && c.n == name);\r\n}\r\n\r\nfunction _skillId(name: string, constants: types.IConstantData): number {\r\n  //default to \"attack\" if empty string or can't find spellname.\r\n  if (name === \"\") return 0;\r\n  if (!name) return -1;\r\n  const idx = constants.skills.findIndex((s) => s && s.s == name);\r\n  return idx >= 0 ? idx : 0;\r\n}\r\n\r\nfunction _readStatus(byte: number): types.IStatus {\r\n  const status = {} as types.IStatus;\r\n  status.hardcore = ((byte >>> 2) & 1) === 1;\r\n  status.died = ((byte >>> 3) & 1) === 1;\r\n  status.expansion = ((byte >>> 5) & 1) === 1;\r\n  status.ladder = ((byte >>> 6) & 1) === 1;\r\n  return status;\r\n}\r\n\r\nfunction _writeStatus(status: types.IStatus): Uint8Array {\r\n  const arr = new Uint8Array(1);\r\n  arr[0] |= status.hardcore ? 1 << 2 : 0;\r\n  arr[0] |= status.died ? 1 << 3 : 0;\r\n  arr[0] |= status.expansion ? 1 << 5 : 0;\r\n  arr[0] |= status.ladder ? 1 << 6 : 0;\r\n  return arr;\r\n}\r\n\r\nfunction _readCharMenuAppearance(bytes: Uint8Array, constants: types.IConstantData): types.ICharMenuAppearance {\r\n  const appearance = {} as types.ICharMenuAppearance;\r\n  const reader = new BitReader(bytes);\r\n  const graphics = reader.ReadArray(16);\r\n  const tints = reader.ReadArray(16);\r\n  appearance.head = { graphic: graphics[0], tint: tints[0] } as types.IMenuAppearance;\r\n  appearance.torso = { graphic: graphics[1], tint: tints[1] } as types.IMenuAppearance;\r\n  appearance.legs = { graphic: graphics[2], tint: tints[2] } as types.IMenuAppearance;\r\n  appearance.right_arm = { graphic: graphics[3], tint: tints[3] } as types.IMenuAppearance;\r\n  appearance.left_arm = { graphic: graphics[4], tint: tints[4] } as types.IMenuAppearance;\r\n  appearance.right_hand = { graphic: graphics[5], tint: tints[5] } as types.IMenuAppearance;\r\n  appearance.left_hand = { graphic: graphics[6], tint: tints[6] } as types.IMenuAppearance;\r\n  appearance.shield = { graphic: graphics[7], tint: tints[7] } as types.IMenuAppearance;\r\n  appearance.special1 = { graphic: graphics[8], tint: tints[8] } as types.IMenuAppearance;\r\n  appearance.special2 = { graphic: graphics[9], tint: tints[9] } as types.IMenuAppearance;\r\n  appearance.special3 = { graphic: graphics[10], tint: tints[10] } as types.IMenuAppearance;\r\n  appearance.special4 = { graphic: graphics[11], tint: tints[11] } as types.IMenuAppearance;\r\n  appearance.special5 = { graphic: graphics[12], tint: tints[12] } as types.IMenuAppearance;\r\n  appearance.special6 = { graphic: graphics[13], tint: tints[13] } as types.IMenuAppearance;\r\n  appearance.special7 = { graphic: graphics[14], tint: tints[14] } as types.IMenuAppearance;\r\n  appearance.special8 = { graphic: graphics[15], tint: tints[15] } as types.IMenuAppearance;\r\n  return appearance;\r\n}\r\n\r\nfunction _writeCharMenuAppearance(appearance: types.ICharMenuAppearance, constants: types.IConstantData): Uint8Array {\r\n  const writer = new BitWriter(32);\r\n  writer.length = 32 * 8;\r\n\r\n  const graphics: number[] = [];\r\n  graphics.push(appearance && appearance.head ? appearance.head.graphic : 0);\r\n  graphics.push(appearance && appearance.torso ? appearance.torso.graphic : 0);\r\n  graphics.push(appearance && appearance.legs ? appearance.legs.graphic : 0);\r\n  graphics.push(appearance && appearance.right_arm ? appearance.right_arm.graphic : 0);\r\n  graphics.push(appearance && appearance.left_arm ? appearance.left_arm.graphic : 0);\r\n  graphics.push(appearance && appearance.right_hand ? appearance.right_hand.graphic : 0);\r\n  graphics.push(appearance && appearance.left_hand ? appearance.left_hand.graphic : 0);\r\n  graphics.push(appearance && appearance.shield ? appearance.shield.graphic : 0);\r\n  graphics.push(appearance && appearance.special1 ? appearance.special1.graphic : 0);\r\n  graphics.push(appearance && appearance.special2 ? appearance.special2.graphic : 0);\r\n  graphics.push(appearance && appearance.special3 ? appearance.special3.graphic : 0);\r\n  graphics.push(appearance && appearance.special4 ? appearance.special4.graphic : 0);\r\n  graphics.push(appearance && appearance.special5 ? appearance.special5.graphic : 0);\r\n  graphics.push(appearance && appearance.special6 ? appearance.special6.graphic : 0);\r\n  graphics.push(appearance && appearance.special7 ? appearance.special7.graphic : 0);\r\n  graphics.push(appearance && appearance.special8 ? appearance.special8.graphic : 0);\r\n\r\n  for (const g of graphics) {\r\n    writer.WriteUInt8(g);\r\n  }\r\n\r\n  const tints: number[] = [];\r\n  tints.push(appearance && appearance.head ? appearance.head.tint : 0);\r\n  tints.push(appearance && appearance.torso ? appearance.torso.tint : 0);\r\n  tints.push(appearance && appearance.legs ? appearance.legs.tint : 0);\r\n  tints.push(appearance && appearance.right_arm ? appearance.right_arm.tint : 0);\r\n  tints.push(appearance && appearance.left_arm ? appearance.left_arm.tint : 0);\r\n  tints.push(appearance && appearance.right_hand ? appearance.right_hand.tint : 0);\r\n  tints.push(appearance && appearance.left_hand ? appearance.left_hand.tint : 0);\r\n  tints.push(appearance && appearance.shield ? appearance.shield.tint : 0);\r\n  tints.push(appearance && appearance.special1 ? appearance.special1.tint : 0);\r\n  tints.push(appearance && appearance.special2 ? appearance.special2.tint : 0);\r\n  tints.push(appearance && appearance.special3 ? appearance.special3.tint : 0);\r\n  tints.push(appearance && appearance.special4 ? appearance.special4.tint : 0);\r\n  tints.push(appearance && appearance.special5 ? appearance.special5.tint : 0);\r\n  tints.push(appearance && appearance.special6 ? appearance.special6.tint : 0);\r\n  tints.push(appearance && appearance.special7 ? appearance.special7.tint : 0);\r\n  tints.push(appearance && appearance.special8 ? appearance.special8.tint : 0);\r\n\r\n  for (const t of tints) {\r\n    writer.WriteUInt8(t);\r\n  }\r\n  return writer.ToArray();\r\n}\r\n\r\nfunction _readAssignedSkills(bytes: Uint8Array, constants: types.IConstantData): string[] {\r\n  const skills = [] as string[];\r\n  const reader = new BitReader(bytes);\r\n  for (let i = 0; i < 16; i++) {\r\n    const skillId = reader.ReadUInt32();\r\n    const skill = constants.skills[skillId];\r\n    if (skill) {\r\n      skills.push(skill.s);\r\n    }\r\n  }\r\n  return skills;\r\n}\r\n\r\nfunction _writeAssignedSkills(skills: string[], constants: types.IConstantData): Uint8Array {\r\n  const writer = new BitWriter(64);\r\n  writer.length = 64 * 8;\r\n  skills = skills || [];\r\n  for (let i = 0; i < 16; i++) {\r\n    const skillId = _skillId(skills[i], constants);\r\n    if (skillId > 0) {\r\n      writer.WriteUInt32(skillId);\r\n    } else {\r\n      writer.WriteUInt32(0xffff);\r\n    }\r\n  }\r\n\r\n  return writer.ToArray();\r\n}\r\n\r\nfunction _readDifficulty(bytes: Uint8Array): types.IDifficulty {\r\n  const difficulty = {} as types.IDifficulty;\r\n  difficulty.Normal = bytes[0];\r\n  difficulty.Nightmare = bytes[1];\r\n  difficulty.Hell = bytes[2];\r\n  return difficulty;\r\n}\r\n\r\nfunction _writeDifficulty(difficulty: types.IDifficulty): Uint8Array {\r\n  const writer = new BitWriter(3);\r\n  writer.length = 3 * 8;\r\n  writer.WriteUInt8(difficulty.Normal);\r\n  writer.WriteUInt8(difficulty.Nightmare);\r\n  writer.WriteUInt8(difficulty.Hell);\r\n  return writer.ToArray();\r\n}\r\n\r\nfunction _readQuests(bytes: Uint8Array): types.IQuests {\r\n  const quests = {} as types.IQuests;\r\n  const reader = new BitReader(bytes);\r\n  quests.act_i = {} as types.IActIQuests;\r\n  quests.act_i.introduced = reader.ReadUInt16() === 0x1; //0x0000\r\n  quests.act_i.den_of_evil = _readQuest(reader.ReadArray(2)); //0x0002\r\n  quests.act_i.sisters_burial_grounds = _readQuest(reader.ReadArray(2));\r\n  quests.act_i.tools_of_the_trade = _readQuest(reader.ReadArray(2));\r\n  quests.act_i.the_search_for_cain = _readQuest(reader.ReadArray(2));\r\n  quests.act_i.the_forgotten_tower = _readQuest(reader.ReadArray(2));\r\n  quests.act_i.sisters_to_the_slaughter = _readQuest(reader.ReadArray(2));\r\n  quests.act_i.completed = reader.ReadUInt16() === 0x1;\r\n  quests.act_ii = {} as types.IActIIQuests;\r\n  quests.act_ii.introduced = reader.ReadUInt16() === 0x1; //0x0010 [if jerhyn introduction = 0x01]\r\n  quests.act_ii.radaments_lair = _readQuest(reader.ReadArray(2)); //0x0012\r\n  quests.act_ii.the_horadric_staff = _readQuest(reader.ReadArray(2));\r\n  quests.act_ii.tainted_sun = _readQuest(reader.ReadArray(2));\r\n  quests.act_ii.arcane_sanctuary = _readQuest(reader.ReadArray(2));\r\n  quests.act_ii.the_summoner = _readQuest(reader.ReadArray(2));\r\n  quests.act_ii.the_seven_tombs = _readQuest(reader.ReadArray(2));\r\n  quests.act_ii.completed = reader.ReadUInt16() === 0x1; //0x001e\r\n  quests.act_iii = {} as types.IActIIIQuests;\r\n  quests.act_iii.introduced = reader.ReadUInt16() === 0x1; //0x0020 [if hratli introduction = 0x01]\r\n  quests.act_iii.lam_esens_tome = _readQuest(reader.ReadArray(2)); //0x0022\r\n  quests.act_iii.khalims_will = _readQuest(reader.ReadArray(2));\r\n  quests.act_iii.blade_of_the_old_religion = _readQuest(reader.ReadArray(2));\r\n  quests.act_iii.the_golden_bird = _readQuest(reader.ReadArray(2));\r\n  quests.act_iii.the_blackened_temple = _readQuest(reader.ReadArray(2));\r\n  quests.act_iii.the_guardian = _readQuest(reader.ReadArray(2));\r\n  quests.act_iii.completed = reader.ReadUInt16() === 0x1; //0x002e\r\n  quests.act_iv = {} as types.IActIVQuests;\r\n  quests.act_iv.introduced = reader.ReadUInt16() === 0x1; //0x0030 [if activ introduction = 0x01]\r\n  quests.act_iv.the_fallen_angel = _readQuest(reader.ReadArray(2)); //0x0032\r\n  quests.act_iv.terrors_end = _readQuest(reader.ReadArray(2));\r\n  quests.act_iv.hellforge = _readQuest(reader.ReadArray(2));\r\n  quests.act_iv.completed = reader.ReadUInt16() === 0x1; //0x0038\r\n  reader.SkipBytes(10); //0x003a\r\n  quests.act_v = {} as types.IActVQuests;\r\n  quests.act_v.introduced = reader.ReadUInt16() === 0x1;\r\n  quests.act_v.siege_on_harrogath = _readQuest(reader.ReadArray(2)); //0x0046\r\n  quests.act_v.rescue_on_mount_arreat = _readQuest(reader.ReadArray(2));\r\n  quests.act_v.prison_of_ice = _readQuest(reader.ReadArray(2));\r\n  quests.act_v.betrayal_of_harrogath = _readQuest(reader.ReadArray(2));\r\n  quests.act_v.rite_of_passage = _readQuest(reader.ReadArray(2));\r\n  quests.act_v.eve_of_destruction = _readQuest(reader.ReadArray(2));\r\n  quests.act_v.completed = reader.ReadUInt16() === 0x1;\r\n  reader.SkipBytes(12);\r\n  return quests; //sizeof [0x0060]\r\n}\r\n\r\nfunction _writeQuests(quests: types.IQuests): Uint8Array {\r\n  const writer = new BitWriter(96);\r\n  writer.length = 96 * 8;\r\n  const difficultyCompleted = +quests.act_v.completed || +quests.act_v.eve_of_destruction.b0_is_completed;\r\n  return writer\r\n    .WriteUInt16(+quests.act_i.introduced)\r\n    .WriteArray(_writeQuest(quests.act_i.den_of_evil))\r\n    .WriteArray(_writeQuest(quests.act_i.sisters_burial_grounds))\r\n    .WriteArray(_writeQuest(quests.act_i.tools_of_the_trade))\r\n    .WriteArray(_writeQuest(quests.act_i.the_search_for_cain))\r\n    .WriteArray(_writeQuest(quests.act_i.the_forgotten_tower))\r\n    .WriteArray(_writeQuest(quests.act_i.sisters_to_the_slaughter))\r\n    .WriteUInt16(+quests.act_i.completed || +quests.act_i.sisters_to_the_slaughter.b0_is_completed)\r\n    .WriteUInt16(+quests.act_ii.introduced || +quests.act_i.sisters_to_the_slaughter.b0_is_completed)\r\n    .WriteArray(_writeQuest(quests.act_ii.radaments_lair))\r\n    .WriteArray(_writeQuest(quests.act_ii.the_horadric_staff))\r\n    .WriteArray(_writeQuest(quests.act_ii.tainted_sun))\r\n    .WriteArray(_writeQuest(quests.act_ii.arcane_sanctuary))\r\n    .WriteArray(_writeQuest(quests.act_ii.the_summoner))\r\n    .WriteArray(_writeQuest(quests.act_ii.the_seven_tombs))\r\n    .WriteUInt16(+quests.act_ii.completed || +quests.act_ii.the_seven_tombs.b0_is_completed)\r\n    .WriteUInt16(+quests.act_iii.introduced || +quests.act_ii.the_seven_tombs.b0_is_completed)\r\n    .WriteArray(_writeQuest(quests.act_iii.lam_esens_tome))\r\n    .WriteArray(_writeQuest(quests.act_iii.khalims_will))\r\n    .WriteArray(_writeQuest(quests.act_iii.blade_of_the_old_religion))\r\n    .WriteArray(_writeQuest(quests.act_iii.the_golden_bird))\r\n    .WriteArray(_writeQuest(quests.act_iii.the_blackened_temple))\r\n    .WriteArray(_writeQuest(quests.act_iii.the_guardian))\r\n    .WriteUInt16(+quests.act_iii.completed || +quests.act_iii.the_guardian.b0_is_completed)\r\n    .WriteUInt16(+quests.act_iv.introduced || +quests.act_iii.the_guardian.b0_is_completed)\r\n    .WriteArray(_writeQuest(quests.act_iv.the_fallen_angel))\r\n    .WriteArray(_writeQuest(quests.act_iv.terrors_end))\r\n    .WriteArray(_writeQuest(quests.act_iv.hellforge))\r\n    .WriteUInt16(+quests.act_iv.completed || +quests.act_iv.terrors_end.b0_is_completed)\r\n    .WriteArray(new Uint8Array(6))\r\n    .WriteUInt16(+quests.act_v.introduced || +quests.act_iv.terrors_end.b0_is_completed)\r\n    .WriteArray(new Uint8Array(4))\r\n    .WriteArray(_writeQuest(quests.act_v.siege_on_harrogath))\r\n    .WriteArray(_writeQuest(quests.act_v.rescue_on_mount_arreat))\r\n    .WriteArray(_writeQuest(quests.act_v.prison_of_ice))\r\n    .WriteArray(_writeQuest(quests.act_v.betrayal_of_harrogath))\r\n    .WriteArray(_writeQuest(quests.act_v.rite_of_passage))\r\n    .WriteArray(_writeQuest(quests.act_v.eve_of_destruction))\r\n    .WriteUInt8(difficultyCompleted)\r\n    .WriteUInt8(difficultyCompleted ? 0x80 : 0x0) //is this right?\r\n    .WriteArray(new Uint8Array(12))\r\n    .ToArray();\r\n}\r\n\r\nfunction _readQuest(bytes: Uint8Array): types.IQuest {\r\n  const quest = {} as types.IQuest;\r\n  const reader = new BitReader(bytes);\r\n  quest.b0_is_completed = reader.ReadBit() === 1;\r\n  quest.b1_is_requirement_completed = reader.ReadBit() === 1;\r\n  quest.b2_is_received = reader.ReadBit() === 1;\r\n  if (reader.ReadBit() === 1) quest.b3_left_town = true;\r\n  if (reader.ReadBit() === 1) quest.b4_entered_area = true;\r\n  if (reader.ReadBit() === 1) quest.b5_custom1 = true;\r\n  if (reader.ReadBit() === 1) quest.b6_custom2 = true;\r\n  if (reader.ReadBit() === 1) quest.b7_custom3 = true;\r\n  if (reader.ReadBit() === 1) quest.b8_custom4 = true;\r\n  if (reader.ReadBit() === 1) quest.b9_custom5 = true;\r\n  if (reader.ReadBit() === 1) quest.b10_custom6 = true;\r\n  if (reader.ReadBit() === 1) quest.b11_custom7 = true;\r\n  quest.b12_closed = reader.ReadBit() === 1;\r\n  quest.b13_done_recently = reader.ReadBit() === 1;\r\n  if (reader.ReadBit() === 1) quest.b14_completed_now = true;\r\n  if (reader.ReadBit() === 1) quest.b15_completed_before = true;\r\n  return quest;\r\n}\r\n\r\nfunction _writeQuest(quest: types.IQuest): Uint8Array {\r\n  const writer = new BitWriter(2);\r\n  writer.length = 2 * 8;\r\n  writer.WriteBit(+quest.b0_is_completed);\r\n  writer.WriteBit(+quest.b1_is_requirement_completed);\r\n  writer.WriteBit(+quest.b2_is_received);\r\n  writer.WriteBit(+quest.b3_left_town);\r\n  writer.WriteBit(+quest.b4_entered_area);\r\n  writer.WriteBit(+quest.b5_custom1);\r\n  writer.WriteBit(+quest.b6_custom2);\r\n  writer.WriteBit(+quest.b7_custom3);\r\n  writer.WriteBit(+quest.b8_custom4);\r\n  writer.WriteBit(+quest.b9_custom5);\r\n  writer.WriteBit(+quest.b10_custom6);\r\n  writer.WriteBit(+quest.b11_custom7);\r\n  writer.WriteBit(+quest.b12_closed);\r\n  writer.WriteBit(+quest.b13_done_recently);\r\n  writer.WriteBit(+quest.b14_completed_now);\r\n  writer.WriteBit(+quest.b15_completed_before);\r\n  return writer.ToArray();\r\n}\r\n\r\nfunction _readWaypointData(bytes: Uint8Array): types.IWaypointData {\r\n  const waypoints = {} as types.IWaypointData;\r\n  const reader = new BitReader(bytes);\r\n  for (let i = 0; i < difficulties.length; i++) {\r\n    waypoints[difficulties[i]] = _readWaypoints(reader.ReadArray(24));\r\n  }\r\n  return waypoints;\r\n}\r\n\r\nfunction _readWaypoints(bytes: Uint8Array): types.IWaypoints {\r\n  const waypoints = {} as types.IWaypoints;\r\n  const reader = new BitReader(bytes);\r\n  reader.SkipBytes(2); //unk = 0x2, 0x\r\n  waypoints.act_i = {} as types.IActIWaypoints;\r\n  waypoints.act_i.rogue_encampement = reader.ReadBit() === 1;\r\n  waypoints.act_i.cold_plains = reader.ReadBit() === 1;\r\n  waypoints.act_i.stony_field = reader.ReadBit() === 1;\r\n  waypoints.act_i.dark_woods = reader.ReadBit() === 1;\r\n  waypoints.act_i.black_marsh = reader.ReadBit() === 1;\r\n  waypoints.act_i.outer_cloister = reader.ReadBit() === 1;\r\n  waypoints.act_i.jail_lvl_1 = reader.ReadBit() === 1;\r\n  waypoints.act_i.inner_cloister = reader.ReadBit() === 1;\r\n  waypoints.act_i.catacombs_lvl_2 = reader.ReadBit() === 1;\r\n  waypoints.act_ii = {} as types.IActIIWaypoints;\r\n  waypoints.act_ii.lut_gholein = reader.ReadBit() === 1;\r\n  waypoints.act_ii.sewers_lvl_2 = reader.ReadBit() === 1;\r\n  waypoints.act_ii.dry_hills = reader.ReadBit() === 1;\r\n  waypoints.act_ii.halls_of_the_dead_lvl_2 = reader.ReadBit() === 1;\r\n  waypoints.act_ii.far_oasis = reader.ReadBit() === 1;\r\n  waypoints.act_ii.lost_city = reader.ReadBit() === 1;\r\n  waypoints.act_ii.palace_cellar_lvl_1 = reader.ReadBit() === 1;\r\n  waypoints.act_ii.arcane_sanctuary = reader.ReadBit() === 1;\r\n  waypoints.act_ii.canyon_of_the_magi = reader.ReadBit() === 1;\r\n  waypoints.act_iii = {} as types.IActIIIWaypoints;\r\n  waypoints.act_iii.kurast_docks = reader.ReadBit() === 1;\r\n  waypoints.act_iii.spider_forest = reader.ReadBit() === 1;\r\n  waypoints.act_iii.great_marsh = reader.ReadBit() === 1;\r\n  waypoints.act_iii.flayer_jungle = reader.ReadBit() === 1;\r\n  waypoints.act_iii.lower_kurast = reader.ReadBit() === 1;\r\n  waypoints.act_iii.kurast_bazaar = reader.ReadBit() === 1;\r\n  waypoints.act_iii.upper_kurast = reader.ReadBit() === 1;\r\n  waypoints.act_iii.travincal = reader.ReadBit() === 1;\r\n  waypoints.act_iii.durance_of_hate_lvl_2 = reader.ReadBit() === 1;\r\n  waypoints.act_iv = {} as types.IActIVWaypoints;\r\n  waypoints.act_iv.the_pandemonium_fortress = reader.ReadBit() === 1;\r\n  waypoints.act_iv.city_of_the_damned = reader.ReadBit() === 1;\r\n  waypoints.act_iv.river_of_flame = reader.ReadBit() === 1;\r\n  waypoints.act_v = {} as types.IActVWaypoints;\r\n  waypoints.act_v.harrogath = reader.ReadBit() === 1;\r\n  waypoints.act_v.frigid_highlands = reader.ReadBit() === 1;\r\n  waypoints.act_v.arreat_plateau = reader.ReadBit() === 1;\r\n  waypoints.act_v.crystalline_passage = reader.ReadBit() === 1;\r\n  waypoints.act_v.halls_of_pain = reader.ReadBit() === 1;\r\n  waypoints.act_v.glacial_trail = reader.ReadBit() === 1;\r\n  waypoints.act_v.frozen_tundra = reader.ReadBit() === 1;\r\n  waypoints.act_v.the_ancients_way = reader.ReadBit() === 1;\r\n  waypoints.act_v.worldstone_keep_lvl_2 = reader.ReadBit() === 1;\r\n  reader.Align().SkipBytes(17);\r\n  return waypoints;\r\n}\r\n\r\nfunction _writeWaypointData(waypoints: types.IWaypointData): Uint8Array {\r\n  const writer = new BitWriter(72);\r\n  writer.length = 72 * 8;\r\n  for (let i = 0; i < difficulties.length; i++) {\r\n    const w = waypoints != null ? waypoints[difficulties[i]] : null;\r\n    writer.WriteArray(_writeWaypoints(w));\r\n  }\r\n  return writer.ToArray();\r\n}\r\n\r\nfunction _writeWaypoints(waypoints: types.IWaypoints): Uint8Array {\r\n  const writer = new BitWriter(24);\r\n  writer.length = 24 * 8;\r\n  writer.WriteArray(new Uint8Array([0x02, 0x01]));\r\n  if (waypoints) {\r\n    if (waypoints.act_i) {\r\n      writer.WriteBit(+waypoints.act_i.rogue_encampement);\r\n      writer.WriteBit(+waypoints.act_i.cold_plains);\r\n      writer.WriteBit(+waypoints.act_i.stony_field);\r\n      writer.WriteBit(+waypoints.act_i.dark_woods);\r\n      writer.WriteBit(+waypoints.act_i.black_marsh);\r\n      writer.WriteBit(+waypoints.act_i.outer_cloister);\r\n      writer.WriteBit(+waypoints.act_i.jail_lvl_1);\r\n      writer.WriteBit(+waypoints.act_i.inner_cloister);\r\n      writer.WriteBit(+waypoints.act_i.catacombs_lvl_2);\r\n    }\r\n    if (waypoints.act_ii) {\r\n      writer.WriteBit(+waypoints.act_ii.lut_gholein);\r\n      writer.WriteBit(+waypoints.act_ii.sewers_lvl_2);\r\n      writer.WriteBit(+waypoints.act_ii.dry_hills);\r\n      writer.WriteBit(+waypoints.act_ii.halls_of_the_dead_lvl_2);\r\n      writer.WriteBit(+waypoints.act_ii.far_oasis);\r\n      writer.WriteBit(+waypoints.act_ii.lost_city);\r\n      writer.WriteBit(+waypoints.act_ii.palace_cellar_lvl_1);\r\n      writer.WriteBit(+waypoints.act_ii.arcane_sanctuary);\r\n      writer.WriteBit(+waypoints.act_ii.canyon_of_the_magi);\r\n    }\r\n    if (waypoints.act_iii) {\r\n      writer.WriteBit(+waypoints.act_iii.kurast_docks);\r\n      writer.WriteBit(+waypoints.act_iii.spider_forest);\r\n      writer.WriteBit(+waypoints.act_iii.great_marsh);\r\n      writer.WriteBit(+waypoints.act_iii.flayer_jungle);\r\n      writer.WriteBit(+waypoints.act_iii.lower_kurast);\r\n      writer.WriteBit(+waypoints.act_iii.kurast_bazaar);\r\n      writer.WriteBit(+waypoints.act_iii.upper_kurast);\r\n      writer.WriteBit(+waypoints.act_iii.travincal);\r\n      writer.WriteBit(+waypoints.act_iii.durance_of_hate_lvl_2);\r\n    }\r\n    if (waypoints.act_iv) {\r\n      writer.WriteBit(+waypoints.act_iv.the_pandemonium_fortress);\r\n      writer.WriteBit(+waypoints.act_iv.city_of_the_damned);\r\n      writer.WriteBit(+waypoints.act_iv.river_of_flame);\r\n    }\r\n    if (waypoints.act_v) {\r\n      writer.WriteBit(+waypoints.act_v.harrogath);\r\n      writer.WriteBit(+waypoints.act_v.frigid_highlands);\r\n      writer.WriteBit(+waypoints.act_v.arreat_plateau);\r\n      writer.WriteBit(+waypoints.act_v.crystalline_passage);\r\n      writer.WriteBit(+waypoints.act_v.halls_of_pain);\r\n      writer.WriteBit(+waypoints.act_v.glacial_trail);\r\n      writer.WriteBit(+waypoints.act_v.frozen_tundra);\r\n      writer.WriteBit(+waypoints.act_v.the_ancients_way);\r\n      writer.WriteBit(+waypoints.act_v.worldstone_keep_lvl_2);\r\n    }\r\n  } else {\r\n    //all wps\r\n    //writer.WriteArray(new Uint8Array(5));\r\n    writer.WriteArray(new Uint8Array([0xff, 0xff, 0xff, 0xff, 0x7f]));\r\n    //_writeBits(writer, 0x3fffffffff, start, 0, 38);\r\n  }\r\n  writer.Align().WriteArray(new Uint8Array(17));\r\n  return writer.ToArray();\r\n}\r\n\r\nfunction _readNPCData(bytes: Uint8Array): types.INPCData {\r\n  const npcs = { normal: {}, nm: {}, hell: {} } as types.INPCData;\r\n  const reader = new BitReader(bytes);\r\n  for (let j = 0; j < 3; j++) {\r\n    npcs[difficulties[j]] = {\r\n      warriv_act_ii: { intro: false, congrats: false },\r\n      charsi: { intro: false, congrats: false },\r\n      warriv_act_i: { intro: false, congrats: false },\r\n      kashya: { intro: false, congrats: false },\r\n      akara: { intro: false, congrats: false },\r\n      gheed: { intro: false, congrats: false },\r\n      greiz: { intro: false, congrats: false },\r\n      jerhyn: { intro: false, congrats: false },\r\n      meshif_act_ii: { intro: false, congrats: false },\r\n      geglash: { intro: false, congrats: false },\r\n      lysnader: { intro: false, congrats: false },\r\n      fara: { intro: false, congrats: false },\r\n      drogan: { intro: false, congrats: false },\r\n      alkor: { intro: false, congrats: false },\r\n      hratli: { intro: false, congrats: false },\r\n      ashera: { intro: false, congrats: false },\r\n      cain_act_iii: { intro: false, congrats: false },\r\n      elzix: { intro: false, congrats: false },\r\n      malah: { intro: false, congrats: false },\r\n      anya: { intro: false, congrats: false },\r\n      natalya: { intro: false, congrats: false },\r\n      meshif_act_iii: { intro: false, congrats: false },\r\n      ormus: { intro: false, congrats: false },\r\n      cain_act_v: { intro: false, congrats: false },\r\n      qualkehk: { intro: false, congrats: false },\r\n      nihlathak: { intro: false, congrats: false },\r\n    } as types.INPCS;\r\n  }\r\n  //introductions\r\n  for (let i = 0; i < 3; i++) {\r\n    const j = i * 5;\r\n    const npc = npcs[difficulties[i]];\r\n    npc.warriv_act_ii.intro = reader.bits[0 + j * 8] === 1;\r\n    npc.charsi.intro = reader.bits[2 + j * 8] === 1;\r\n    npc.warriv_act_i.intro = reader.bits[3 + j * 8] === 1;\r\n    npc.kashya.intro = reader.bits[4 + j * 8] === 1;\r\n    npc.akara.intro = reader.bits[5 + j * 8] === 1;\r\n    npc.gheed.intro = reader.bits[6 + j * 8] === 1;\r\n    npc.greiz.intro = reader.bits[8 + j * 8] === 1;\r\n    npc.jerhyn.intro = reader.bits[9 + j * 8] === 1;\r\n    npc.meshif_act_ii.intro = reader.bits[10 + j * 8] === 1;\r\n    npc.geglash.intro = reader.bits[11 + j * 8] === 1;\r\n    npc.lysnader.intro = reader.bits[12 + j * 8] === 1;\r\n    npc.fara.intro = reader.bits[13 + j * 8] === 1;\r\n    npc.drogan.intro = reader.bits[14 + j * 8] === 1;\r\n    npc.alkor.intro = reader.bits[16 + j * 8] === 1;\r\n    npc.hratli.intro = reader.bits[17 + j * 8] === 1;\r\n    npc.ashera.intro = reader.bits[18 + j * 8] === 1;\r\n    npc.cain_act_iii.intro = reader.bits[21 + j * 8] === 1;\r\n    npc.elzix.intro = reader.bits[23 + j * 8] === 1;\r\n    npc.malah.intro = reader.bits[24 + j * 8] === 1;\r\n    npc.anya.intro = reader.bits[25 + j * 8] === 1;\r\n    npc.natalya.intro = reader.bits[27 + j * 8] === 1;\r\n    npc.meshif_act_iii.intro = reader.bits[28 + j * 8] === 1;\r\n    npc.ormus.intro = reader.bits[31 + j * 8] === 1;\r\n    npc.cain_act_v.intro = reader.bits[37 + j * 8] === 1;\r\n    npc.qualkehk.intro = reader.bits[38 + j * 8] === 1;\r\n    npc.nihlathak.intro = reader.bits[39 + j * 8] === 1;\r\n  }\r\n  //congrats\r\n  for (let i = 0; i < 3; i++) {\r\n    const j = i * 5;\r\n    const npc = npcs[difficulties[i]];\r\n    npc.warriv_act_ii.congrats = reader.bits[192 + (0 + j * 8)] === 1;\r\n    npc.charsi.congrats = reader.bits[192 + (2 + j * 8)] === 1;\r\n    npc.warriv_act_i.congrats = reader.bits[192 + (3 + j * 8)] === 1;\r\n    npc.kashya.congrats = reader.bits[192 + (4 + j * 8)] === 1;\r\n    npc.akara.congrats = reader.bits[192 + (5 + j * 8)] === 1;\r\n    npc.gheed.congrats = reader.bits[192 + (6 + j * 8)] === 1;\r\n    npc.greiz.congrats = reader.bits[192 + (8 + j * 8)] === 1;\r\n    npc.jerhyn.congrats = reader.bits[192 + (9 + j * 8)] === 1;\r\n    npc.meshif_act_ii.congrats = reader.bits[192 + (10 + j * 8)] === 1;\r\n    npc.geglash.congrats = reader.bits[192 + (11 + j * 8)] === 1;\r\n    npc.lysnader.congrats = reader.bits[192 + (12 + j * 8)] === 1;\r\n    npc.fara.congrats = reader.bits[192 + (13 + j * 8)] === 1;\r\n    npc.drogan.congrats = reader.bits[192 + (14 + j * 8)] === 1;\r\n    npc.alkor.congrats = reader.bits[192 + (16 + j * 8)] === 1;\r\n    npc.hratli.congrats = reader.bits[192 + (17 + j * 8)] === 1;\r\n    npc.ashera.congrats = reader.bits[192 + (18 + j * 8)] === 1;\r\n    npc.cain_act_iii.congrats = reader.bits[192 + (21 + j * 8)] === 1;\r\n    npc.elzix.congrats = reader.bits[192 + (23 + j * 8)] === 1;\r\n    npc.malah.congrats = reader.bits[192 + (24 + j * 8)] === 1;\r\n    npc.anya.congrats = reader.bits[192 + (25 + j * 8)] === 1;\r\n    npc.natalya.congrats = reader.bits[192 + (27 + j * 8)] === 1;\r\n    npc.meshif_act_iii.congrats = reader.bits[192 + (28 + j * 8)] === 1;\r\n    npc.ormus.congrats = reader.bits[192 + (31 + j * 8)] === 1;\r\n    npc.cain_act_v.congrats = reader.bits[192 + (37 + j * 8)] === 1;\r\n    npc.qualkehk.congrats = reader.bits[192 + (38 + j * 8)] === 1;\r\n    npc.nihlathak.congrats = reader.bits[192 + (39 + j * 8)] === 1;\r\n  }\r\n  return npcs;\r\n}\r\n\r\nfunction _writeNPCData(npcs: types.INPCData): Uint8Array {\r\n  const writer = new BitWriter(0x30);\r\n  writer.length = 0x30 * 8;\r\n  if (npcs) {\r\n    for (let j = 0; j < 3; j++) {\r\n      const npc = npcs[difficulties[j]];\r\n      writer.SeekByte(j * 5);\r\n      writer.WriteBit(+npc.warriv_act_ii.intro);\r\n      writer.WriteBit(0);\r\n      writer.WriteBit(+npc.charsi.intro);\r\n      writer.WriteBit(+npc.warriv_act_i.intro);\r\n      writer.WriteBit(+npc.kashya.intro);\r\n      writer.WriteBit(+npc.akara.intro);\r\n      writer.WriteBit(+npc.gheed.intro);\r\n      writer.WriteBit(0);\r\n      writer.WriteBit(+npc.greiz.intro);\r\n      writer.WriteBit(+npc.jerhyn.intro);\r\n      writer.WriteBit(+npc.meshif_act_ii.intro);\r\n      writer.WriteBit(+npc.geglash.intro);\r\n      writer.WriteBit(+npc.lysnader.intro);\r\n      writer.WriteBit(+npc.fara.intro);\r\n      writer.WriteBit(+npc.drogan.intro);\r\n      writer.WriteBit(0);\r\n      writer.WriteBit(+npc.alkor.intro);\r\n      writer.WriteBit(+npc.hratli.intro);\r\n      writer.WriteBit(+npc.ashera.intro);\r\n      writer.WriteBits(new Uint8Array(2).fill(0), 2);\r\n      writer.WriteBit(+npc.cain_act_iii.intro);\r\n      writer.WriteBit(0);\r\n      writer.WriteBit(+npc.elzix.intro);\r\n      writer.WriteBit(+npc.malah.intro);\r\n      writer.WriteBit(+npc.anya.intro);\r\n      writer.WriteBit(0);\r\n      writer.WriteBit(+npc.natalya.intro);\r\n      writer.WriteBit(+npc.meshif_act_iii.intro);\r\n      writer.WriteBits(new Uint8Array(2).fill(0), 2);\r\n      writer.WriteBit(+npc.ormus.intro);\r\n      writer.WriteBits(new Uint8Array(5).fill(0), 5);\r\n      writer.WriteBit(+npc.cain_act_v.intro);\r\n      writer.WriteBit(+npc.qualkehk.intro);\r\n      writer.WriteBit(+npc.nihlathak.intro);\r\n    }\r\n    for (let j = 0; j < 3; j++) {\r\n      writer.SeekByte(24 + j * 5);\r\n      const npc = npcs[difficulties[j]];\r\n      writer.WriteBit(+npc.warriv_act_ii.congrats);\r\n      writer.WriteBit(0);\r\n      writer.WriteBit(+npc.charsi.congrats);\r\n      writer.WriteBit(+npc.warriv_act_i.congrats);\r\n      writer.WriteBit(+npc.kashya.congrats);\r\n      writer.WriteBit(+npc.akara.congrats);\r\n      writer.WriteBit(+npc.gheed.congrats);\r\n      writer.WriteBit(0);\r\n      writer.WriteBit(+npc.greiz.congrats);\r\n      writer.WriteBit(+npc.jerhyn.congrats);\r\n      writer.WriteBit(+npc.meshif_act_ii.congrats);\r\n      writer.WriteBit(+npc.geglash.congrats);\r\n      writer.WriteBit(+npc.lysnader.congrats);\r\n      writer.WriteBit(+npc.fara.congrats);\r\n      writer.WriteBit(+npc.drogan.congrats);\r\n      writer.WriteBit(0);\r\n      writer.WriteBit(+npc.alkor.congrats);\r\n      writer.WriteBit(+npc.hratli.congrats);\r\n      writer.WriteBit(+npc.ashera.congrats);\r\n      writer.WriteBits(new Uint8Array(2).fill(0), 2);\r\n      writer.WriteBit(+npc.cain_act_iii.congrats);\r\n      writer.WriteBit(0);\r\n      writer.WriteBit(+npc.elzix.congrats);\r\n      writer.WriteBit(+npc.malah.congrats);\r\n      writer.WriteBit(+npc.anya.congrats);\r\n      writer.WriteBit(0);\r\n      writer.WriteBit(+npc.natalya.congrats);\r\n      writer.WriteBit(+npc.meshif_act_iii.congrats);\r\n      writer.WriteBits(new Uint8Array(2).fill(0), 2);\r\n      writer.WriteBit(+npc.ormus.congrats);\r\n      writer.WriteBits(new Uint8Array(5).fill(0), 5);\r\n      writer.WriteBit(+npc.cain_act_v.congrats);\r\n      writer.WriteBit(+npc.qualkehk.congrats);\r\n      writer.WriteBit(+npc.nihlathak.congrats);\r\n    }\r\n  }\r\n  return writer.ToArray();\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/d2/index.ts\");\n",""],"names":[],"sourceRoot":""}